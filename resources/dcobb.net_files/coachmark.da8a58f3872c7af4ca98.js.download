(window.webpackJsonp=window.webpackJsonp||[]).push([["coachmark"],{U6Xm:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("G82u");class i{}i.addCoachmark=new r.a("AddCoachmark"),i.updateCoachmarkVisibleStatus=new r.a("UpdateCoachmarkVisibleStatus")},"W3b/":function(e,t,a){"use strict";a.r(t),a.d(t,"Coachmark",(function(){return te})),a.d(t,"CoachmarkActions",(function(){return U.a})),a.d(t,"CoachmarkInspector",(function(){return Q})),a.d(t,"CoachmarkConnector",(function(){return J})),a.d(t,"CoachmarkReducer",(function(){return F})),a.d(t,"CoachmarkReduxSubspaceName",(function(){return H})),a.d(t,"ToolingInfo",(function(){return ae}));var r=a("D57K"),i=a("5mwN"),n=a("rcIs"),o=a("VZ41");var s=a("Am8i"),c=a("FPTP"),l=a("y2Il"),h=a("SP+O"),d=a("MZhw"),m=a("objN"),p=a("mDtb"),u=a("LD6M"),k=a("aP31"),g=a("9CwC"),b=a("X9F+"),C=a("3ZGc"),E=a("rRWH"),v=a("qibw"),f=a("0fst");var x=a("Gy7L"),T=a("kpPY"),O=a("gQ7Y"),y=a("HxRh"),w=a("ERkP"),j=a.n(w),A=a("7nmT"),I=a.n(A),P=a("tMmC"),M=a("Gil3"),S=a("0PLU"),L=a("keKk"),B=a("u5KZ");const D=(e,t)=>{switch(e.ctaType){case z.tryInformationalMode:return()=>Object(r.b)(void 0,void 0,void 0,(function*(){var e;(e=t.hideCoachmark)&&e();const a=Object(M.c)(t.delayInMs);a&&a()}));case z.openAddDialog:return N(t);default:B.a.sendAppErrorEvent(Object.assign(Object.assign({},y.L.InvalidCTAType),{message:"CTA type is invalid or not found.",pb:Object.assign(Object.assign({},y.L.InvalidCTAType.pb),{customMessage:`CTA type: ${e.ctaType} is invalid `})}))}},N=e=>()=>Object(r.b)(void 0,void 0,void 0,(function*(){const t=e.hideCoachmark;t&&t();const a=e.delayInMs||2e3;let r;const i=S.a[S.b.clickAddTileButton];i&&(r=yield i({})),P.a.log(`Action completed: ${r.actionCompleted} status: ${r.status}`),yield Object(L.a)(a);const n=e.updateCoachmark;n&&n()}));var z;!function(e){e.tryInformationalMode="tryInformationalMode",e.openAddDialog="openAddDialog"}(z||(z={}));class R extends i.a{constructor(e){super(e),this.handledProps=Object.assign(Object.assign({},i.b),{actionPauseInMs:void 0,addCoachmarkMessages:void 0,addCoachmarkToPage:void 0,bodyText:void 0,bodyTextAriaLabelText:void 0,bodyTextSize:void 0,creativeId:void 0,coachmarkPlaced:void 0,coachmarkSource:void 0,contentModuleExperienceName:void 0,ctaList:void 0,currentMessageIndex:void 0,dismissButtonAriaLabelText:void 0,displayType:void 0,eventUrl:void 0,hideCoachmark:void 0,isControl:void 0,isTreatment:void 0,leadImage:void 0,leadImageAltText:void 0,mainBodyAriaLabelText:void 0,managedClasses:void 0,placement:void 0,placementId:void 0,pointerPosition:void 0,pointerAriaLabelText:void 0,rootTelemetryObject:void 0,removeCoachmarkFromPage:void 0,reportEvent:void 0,targetElement:void 0,tabIndex:void 0,timeoutTriggered:void 0,timeoutMilliseconds:void 0,titleText:void 0,titleTextAriaLabelText:void 0,titleTextSize:void 0,trackEvent:void 0,trackPartialImpressionEvent:void 0,trackAppErrorEvent:void 0,updateCoachmark:void 0,updateTemplValue:void 0,zIndex:void 0}),this.currentPointerTopOffset=0,this.currentPointerLeftOffset=0,this.windowUpdateEventCallback=()=>{window.requestAnimationFrame(()=>{this.updateCoachmarkPosition(this.props.placement),this.updateCloseButtonPosition()})},this.windowClickEventCallback=e=>{if(this.coachmarkElement&&this.coachmarkElement.current&&this.coachmarkElement.current.getBoundingClientRect){const t=this.coachmarkElement.current.getBoundingClientRect();!(e.pageX&&e.pageY&&e.pageX>=t.left&&e.pageX<=t.right&&e.pageY>=t.top&&e.pageY<=t.bottom)&&this.props.addCoachmarkToPage&&(this.userInteractedWithCoachmark||(this.stampTMPLTag(`ClickedAwayFromCoachmark_${this.props.contentModuleExperienceName}:1`),this.sendTelemetryEvent("click_nonnav","ClickedAwayFromCoachmark_"+this.props.contentModuleExperienceName,this.coachmarkElement.current,"",s.a.Click,s.b.Hide)),this.props.hideCoachmark())}return e},this.closeCoachmark=(e,t,a,i,s)=>Object(r.b)(this,void 0,void 0,(function*(){s||this.sendTelemetryEvent("click_nonnav","Dismiss",e.currentTarget,"",a,i),this.props.coachmarkSource===n.d.Iris&&this.props.reportEvent(o.b.Action,this.props.eventUrl,t,this.props.creativeId,this.props.placementId),this.props.removeCoachmarkFromPage(),this.cleanup()})),this.keyDownHandler=e=>{e.keyCode===x.h&&this.closeCoachmark(e,o.a.Dismiss,s.a.Click,s.b.Hide)},this.lastElementKeyDownHandler=(e,t,a,r,i)=>{e.keyCode===x.m?e.shiftKey?(e.preventDefault(),I.a.findDOMNode(this.coachmarkCTAButtonElement.current).focus()):(e.preventDefault(),I.a.findDOMNode(this.coachmarkCloseElement.current).focus()):e.keyCode===x.g&&this.closeCoachmark(e,t,a,r,i)},this.closeButtonKeyDownHandler=(e,t,a,r)=>{if(e.keyCode===x.m&&this.props.ctaList)if(e.shiftKey){e.preventDefault();const t=this.coachmarkDismissButtonElement.current?this.coachmarkDismissButtonElement.current:this.coachmarkCTAButtonElement.current;I.a.findDOMNode(t).focus()}else e.preventDefault(),I.a.findDOMNode(this.coachmarkCTAButtonElement.current).focus();else e.keyCode===x.g&&this.closeCoachmark(e,t,a,r)},this.ctaButtonHandler=(e,t,a)=>{this.userInteractedWithCoachmark=!0;((e,t,a)=>{const{ctaType:i}=e;if(i)if(t){if(a)return()=>Object(r.b)(void 0,void 0,void 0,(function*(){t.coachmarkSource===n.d.Iris&&t.reportEvent(o.b.Action,t.eventUrl,t.irisAction,t.creativeId,t.placementId);const a=D(e,t);return a?yield a():null}));B.a.sendAppErrorEvent(Object.assign(Object.assign({},y.L.EventNotDefined),{message:"Event is not defined"}))}else B.a.sendAppErrorEvent(Object.assign(Object.assign({},y.L.CoachmarkStateNotDefined),{message:"Coachmark state is not defined"}));else B.a.sendAppErrorEvent(Object.assign(Object.assign({},y.L.CTATypeNotDefined),{message:"CTA type is not defined"}))})(e,{creativeId:this.props.creativeId,coachmarkSource:this.props.coachmarkSource,delayInMs:this.props.actionPauseInMs,eventUrl:this.props.eventUrl,hideCoachmark:this.props.hideCoachmark,irisAction:a,placementId:this.props.placementId,reportEvent:this.props.reportEvent,trackEvent:this.props.trackEvent,updateCoachmark:this.props.updateCoachmark},t)()},this.ctaButtonKeyDownHandler=(e,t,a)=>{if(t.keyCode===x.m)if(t.shiftKey)t.preventDefault(),I.a.findDOMNode(this.coachmarkCloseElement.current).focus();else{t.preventDefault();const e=this.coachmarkDismissButtonElement.current?this.coachmarkDismissButtonElement.current:this.coachmarkCloseElement.current;I.a.findDOMNode(e).focus()}else t.keyCode===x.g&&this.ctaButtonHandler(e,t,a)},this.coachmarkElement=j.a.createRef(),this.coachmarkCloseElement=j.a.createRef(),this.coachmarkPointerElement=j.a.createRef(),this.coachmarkCTAButtonElement=j.a.createRef(),this.coachmarkDismissButtonElement=j.a.createRef(),this.isCurrentlyVisible=!1}componentDidUpdate(){super.componentDidUpdate(),this.initCoachmark()}componentDidMount(){super.componentDidMount(),this.initCoachmark(),this.coachmarkCloseElement.current&&I.a.findDOMNode(this.coachmarkCloseElement.current).focus()}render(){if(super.render(),!this.props.addCoachmarkToPage)return this.cleanup(),j.a.createElement("div",{id:R.emptyCoachmarkPageId});const{coachmark_default:e,coachmark_title:t,coachmark_body:a,coachmark_container:r}=this.props.managedClasses;return this.coachmarkTelemetryObject=this.props.rootTelemetryObject?this.props.rootTelemetryObject.addOrUpdateChild({name:this.props.contentModuleExperienceName?this.props.contentModuleExperienceName:"Coachmark",type:s.e.Module}):null,j.a.createElement("div",Object.assign({},this.unhandledProps(),{id:R.mainElementPageId,ref:this.coachmarkElement,className:e,"aria-hidden":!this.isCurrentlyVisible,"aria-label":this.props.mainBodyAriaLabelText,tabIndex:this.props.tabIndex?this.props.tabIndex:-1,style:{zIndex:this.props.zIndex}},this.coachmarkTelemetryObject.render(),{onKeyDown:this.keyDownHandler}),this.renderPointer(this.props.placement),j.a.createElement("div",null,this.renderLeadImage(),j.a.createElement("div",{className:r},j.a.createElement("div",{id:R.titleTextElementPageId,className:t},j.a.createElement(c.a,{size:this.props.titleTextSize?this.props.titleTextSize:R.titleTextSize},this.props.titleText)),j.a.createElement("div",{id:R.bodyTextElementPageId,className:a},j.a.createElement(c.a,{size:this.props.bodyTextSize?this.props.bodyTextSize:R.bodyTextSize},this.props.bodyText)),this.renderCTAButtons()),this.renderCloseButton()))}renderLeadImage(){return this.props.leadImage?j.a.createElement("img",{src:this.props.leadImage,className:this.props.managedClasses.coachmark_image,alt:this.props.leadImageAltText}):null}renderCTAButtons(){return this.props.ctaList?j.a.createElement("div",{className:this.props.managedClasses.coachmark_ctaButton_container},this.renderCTAButton(this.props.ctaList[0]),this.renderDismissButton(this.props.ctaList[1])):null}renderCTAButton(e){return e&&e.ctaText?j.a.createElement(O.default,Object.assign({},this.coachmarkTelemetryObject?this.coachmarkTelemetryObject.addOrUpdateChild({name:e.ctaText.replace(/\s/g,""),behavior:s.b.View,type:s.e.ActionButton}).render():null,{"aria-label":e.ctaText,title:e.ctaText,ref:this.coachmarkCTAButtonElement,className:this.props.managedClasses.coachmark_ctaButton,onClick:t=>this.ctaButtonHandler(e,t,o.a.Click),onKeyDown:t=>this.ctaButtonKeyDownHandler(e,t,o.a.Click)}),e.ctaText):null}renderDismissButton(e){return e&&e.ctaText?j.a.createElement(O.default,Object.assign({},this.coachmarkTelemetryObject?this.coachmarkTelemetryObject.addOrUpdateChild({name:e.ctaText.replace(/\s/g,""),behavior:s.b.Hide,type:s.e.ActionButton}).render():null,{"aria-label":e.ctaText,title:e.ctaText,ref:this.coachmarkDismissButtonElement,className:this.props.managedClasses.coachmark_dismissButton,onClick:e=>this.closeCoachmark(e,o.a.Dismiss,s.a.Click,s.b.Hide,!0),onKeyDown:e=>this.lastElementKeyDownHandler(e,o.a.Dismiss,s.a.Click,s.b.Hide,!0)}),e.ctaText):null}renderCloseButton(){const{coachmark_close:e}=this.props.managedClasses;return j.a.createElement("div",Object.assign({},this.coachmarkTelemetryObject?this.coachmarkTelemetryObject.addOrUpdateChild({name:"Dismiss",behavior:s.b.Close,type:s.e.ActionButton}).render():null,{id:R.closeElementPageId,ref:this.coachmarkCloseElement,"aria-label":this.props.dismissButtonAriaLabelText,onClick:e=>this.closeCoachmark(e,o.a.Dismiss,s.a.Click,s.b.Close),onKeyDown:e=>this.closeButtonKeyDownHandler(e,o.a.Dismiss,s.a.Click,s.b.Close),tabIndex:0}),j.a.createElement("svg",{className:e},j.a.createElement("path",{d:"M12.708 12L17 16.292L16.292 17L12 12.708L7.70801 17L7 16.292L11.292 12L7 7.70801L7.70801 7L12 11.292L16.292 7L17 7.70801L12.708 12Z"})))}renderPointer(e){return"128000000002304969"==this.props.creativeId?null:j.a.createElement("svg",{id:R.pointerElementPageId,ref:this.coachmarkPointerElement,className:this.props.managedClasses.coachmark_ptr,"aria-label":this.props.pointerAriaLabelText,height:this.props.placement===n.b.Left||this.props.placement===n.b.Right?R.pointerBaseSize:R.pointerExtendSize,width:this.props.placement===n.b.Left||this.props.placement===n.b.Right?R.pointerExtendSize:R.pointerBaseSize,style:{filter:this.getPointerDropShadow(e)}},j.a.createElement("polygon",{points:this.getPointerSVGPoints(e)}))}sendTelemetryEvent(e,t,a,r,i,n){this.props.trackEvent&&e&&a&&t&&this.props.trackEvent({type:e,target:a},a,r,t,i,n)}updateCloseButtonPosition(){const e=this.coachmarkElement&&null!=this.coachmarkElement.current,t=document.getElementById(R.closeElementPageId);e&&t&&(t.style.left=Object(C.a)(this.coachmarkElement.current.offsetWidth-24-4))}getPointerDropShadow(e){switch(e){case n.b.Above:return"drop-shadow(-1px 4px 1px rgba(0, 0, 0, 0.11))";case n.b.Below:return"drop-shadow(0px -1px 1px rgba(0, 0, 0, 0.11))";case n.b.Right:return"drop-shadow(-1.5px 2px 1px rgba(0, 0, 0, 0.11))";case n.b.Left:return"drop-shadow(2.2px 1px 1px rgba(0, 0, 0, 0.11))";default:return null}}getPointerSVGPoints(e){switch(e){case n.b.Above:return"0,0 13,14 26,0";case n.b.Below:return"0,14 13,0 26,14";case n.b.Right:return"14,0 0,13 14,26";case n.b.Left:return"0,0 14,13 0,26";default:return null}}updatePointer(e,t){const a=this.coachmarkElement&&this.coachmarkElement.current?this.coachmarkElement.current:null,r=this.coachmarkElement&&this.coachmarkPointerElement.current?this.coachmarkPointerElement.current:null;if(!r||!a)return;let i=0,o=0;switch(e){case n.b.Above:i=a.offsetHeight-1;break;case n.b.Below:i=-14;break;case n.b.Right:o=-13;break;case n.b.Left:o=a.offsetWidth-2;break;default:return}if(e===n.b.Above||e===n.b.Below)switch(t){case n.c.Adjacent:o=16;break;case n.c.Center:o=a.offsetWidth/2-R.pointerBaseSize/2;break;case n.c.Opposite:o=a.offsetWidth-16-R.pointerBaseSize;break;default:return void this.trackAppErrorEvent(Object.assign(Object.assign({},y.L.GeneralError),{message:"invalid pointer position value"}))}else{if(e!==n.b.Right&&e!==n.b.Left)return;switch(t){case n.c.Adjacent:i=16;break;case n.c.Center:i=a.offsetHeight/2-R.pointerBaseSize/2;break;case n.c.Opposite:i=a.offsetHeight-16-R.pointerBaseSize;break;default:return void this.trackAppErrorEvent(Object.assign(Object.assign({},y.L.GeneralError),{message:"invalid pointer position value"}))}}this.currentPointerTopOffset=i,this.currentPointerLeftOffset=o,r.style.top=Object(C.a)(i),r.style.left=Object(C.a)(o)}updateCoachmarkPosition(e){if("128000000002304969"==this.props.creativeId){if(document.getElementById("museumCard")){const e=document.getElementById("museumCard").getBoundingClientRect(),t=e.right,a=e.top,r=this.coachmarkElement.current.getBoundingClientRect(),i=r.left,n=r.right;this.coachmarkElement.current.style.top=Object(C.a)(a-200),this.coachmarkElement.current.style.left=Object(C.a)(t-(n-i))}else this.coachmarkElement.current.style.top=Object(C.a)(50),this.coachmarkElement.current.style.left=Object(C.a)(50)}else if(this.targetElement&&this.targetElement.getBoundingClientRect&&this.coachmarkElement&&this.coachmarkElement.current&&this.coachmarkElement.current.style){const t=this.targetElement.getBoundingClientRect();let a=0,r=0;switch(e){case n.b.Above:a=t.top-(this.coachmarkElement.current.offsetHeight+R.pointerExtendSize+R.spaceBetweenCoachmarkAndTargetElement),r=t.left+t.width/2-(this.currentPointerLeftOffset+16);break;case n.b.Below:a=t.top+(t.height+R.pointerExtendSize+R.spaceBetweenCoachmarkAndTargetElement),r=t.left+t.width/2-(this.currentPointerLeftOffset+16);break;case n.b.Right:a=t.top+t.height/2-(this.currentPointerTopOffset+R.pointerBaseSize/2),r=t.left+t.height+R.pointerExtendSize+R.spaceBetweenCoachmarkAndTargetElement;break;case n.b.Left:a=t.top+t.height/2-(this.currentPointerTopOffset+R.pointerBaseSize/2),r=t.left-(this.coachmarkElement.current.offsetWidth+R.pointerExtendSize+R.spaceBetweenCoachmarkAndTargetElement);break;default:return void this.trackAppErrorEvent(Object.assign(Object.assign({},y.L.GeneralError),{message:"invalid position placement value"}))}this.coachmarkElement.current.style.top=Object(C.a)(a),this.coachmarkElement.current.style.left=Object(C.a)(r+2)}}initCoachmark(){return Object(r.b)(this,void 0,void 0,(function*(){if(this.props.addCoachmarkToPage)if(this.targetElement=this.findTargetElement(),this.targetElement||"128000000002304969"==this.props.creativeId){if(this.userInteractedWithCoachmark=!1,this.updatePointer(this.props.placement,this.props.pointerPosition),this.updateCoachmarkPosition(this.props.placement),this.updateCloseButtonPosition(),!this.coachmarkFitsInViewport())return this.props.removeCoachmarkFromPage(),void this.trackAppErrorEvent(Object.assign({},y.L.NotPlaceable));if(window.addEventListener(R.windowEventResize,this.windowUpdateEventCallback,!1),window.addEventListener(R.windowEventScroll,this.windowUpdateEventCallback,!1),window.addEventListener(R.windowEventClick,this.windowClickEventCallback,!0),this.addAutoDismiss(),this.props.isControl)return this.props.removeCoachmarkFromPage(),this.stampTMPLTag(`userEligibleToSeeCoachmark_${this.props.contentModuleExperienceName}:1`),void this.stampTMPLTag(`coachmarkSuppressed_${this.props.contentModuleExperienceName}:1`);this.props.isTreatment&&(this.stampTMPLTag(`userEligibleToSeeCoachmark_${this.props.contentModuleExperienceName}:1`),this.stampTMPLTag(`coachmarkShown_${this.props.contentModuleExperienceName}:1`)),this.props.coachmarkPlaced(),this.props.trackPartialImpressionEvent&&"function"==typeof this.props.trackPartialImpressionEvent&&this.props.trackPartialImpressionEvent(this.coachmarkElement.current,!1,"partial",this.props.contentModuleExperienceName?this.props.contentModuleExperienceName:"coachmark_module_v2"),this.props.coachmarkSource===n.d.Iris&&this.props.reportEvent(o.b.Impression,this.props.eventUrl,void 0,this.props.creativeId,this.props.placementId)}else this.props.removeCoachmarkFromPage(),this.targetElement=null}))}stampTMPLTag(e){this.props.updateTemplValue&&"function"==typeof this.props.updateTemplValue?this.props.updateTemplValue(e):this.props.trackAppErrorEvent(Object.assign(Object.assign({},y.L.NotFoundComponent),{message:"TMPL function not found preventing stamp for coachmark: "+this.props.contentModuleExperienceName}))}addAutoDismiss(){if(this.props.timeoutMilliseconds&&this.props.timeoutMilliseconds>0){const e=this.props.currentMessageIndex;window.setTimeout(()=>{this.props.addCoachmarkToPage&&(this.stampTMPLTag(`CoachmarkAutoDismissed_${this.props.contentModuleExperienceName}:1`),this.sendTelemetryEvent("click_nonnav","CoachmarkAutoDismissed_"+this.props.contentModuleExperienceName,this.coachmarkElement.current,"",s.a.Click,s.b.Hide),this.props.timeoutTriggered(e))},this.props.timeoutMilliseconds)}}findTargetElement(){const e=document.querySelector(Object(T.a)("[{0}='{1}']",R.targetElementAttributeName,this.props.targetElement));return e||this.trackAppErrorEvent(Object.assign(Object.assign({},y.L.GeneralError),{message:"target element not found: "+this.props.targetElement})),e}coachmarkFitsInViewport(){if(!(window&&this.coachmarkElement&&this.coachmarkElement.current&&this.coachmarkElement.current.getBoundingClientRect))return!1;const e=this.coachmarkElement.current.getBoundingClientRect();return!(e.top<0)&&(!(e.left<0)&&(!(e.bottom>window.innerHeight||e.bottom>document.documentElement.clientHeight)&&!(e.right>window.innerWidth||e.right>document.documentElement.clientWidth)))}cleanup(){this.isCurrentlyVisible=!1,this.targetElement=null,window.removeEventListener(R.windowEventResize,this.windowUpdateEventCallback),window.removeEventListener(R.windowEventScroll,this.windowUpdateEventCallback),window.removeEventListener(R.windowEventClick,this.windowClickEventCallback),this.coachmarkElement&&this.coachmarkElement.current&&this.coachmarkElement.current.style&&(this.coachmarkElement.current.style.top="0",this.coachmarkElement.current.style.left="0")}trackAppErrorEvent(e){this.props.trackAppErrorEvent&&"function"==typeof this.props.trackAppErrorEvent&&this.props.trackAppErrorEvent(e)}}R.defaultProps={experienceName:"MsnCoachmark"},R.targetElementAttributeName="data-targetid",R.mainElementPageId="coachmark-v2",R.pointerElementPageId="coachmark-v2-ptr",R.titleTextElementPageId="coachmark-v2-titletxt",R.bodyTextElementPageId="coachmark-v2-bodytxt",R.closeElementPageId="coachmark-v2-close",R.emptyCoachmarkPageId="coachmark-v2-empty",R.titleTextSize=l.a._6,R.bodyTextSize=l.a._7,R.pointerBaseSize=26,R.pointerExtendSize=14,R.spaceBetweenCoachmarkAndTargetElement=2,R.windowEventResize="resize",R.windowEventScroll="scroll",R.windowEventClick="click";var _=a("05Au"),U=a("kLs4");const H="MsnCoachmark";class F{reduce(e,t){if(!e)return{coachmarkMessageQueue:null,addCoachmarkToPage:!1,messageIndex:-1,contentModuleExperienceName:void 0};if(!t)return e;let a=null,r=!1;return r=_.a.handleAction(t,U.a.removeCoachmarkFromPage,()=>{a=Object.assign({},e),a.coachmarkMessageQueue=null,a.messageIndex=-1,a.addCoachmarkToPage=!1,a.contentModuleExperienceName=void 0}),r=r||_.a.handleAction(t,U.a.updateCoachmark,()=>{a=Object.assign({},e),a.messageIndex=a.messageIndex+1,a.addCoachmarkToPage=!0,a.contentModuleExperienceName=a.coachmarkMessageQueue[a.messageIndex].name}),r=r||_.a.handleAction(t,U.a.timeoutOccurred,t=>{t===e.messageIndex&&(a=Object.assign({},e),a.coachmarkMessageQueue=null,a.messageIndex=-1,a.addCoachmarkToPage=!1,a.contentModuleExperienceName=void 0)}),r=r||_.a.handleAction(t,U.a.addCoachmarkMessages,t=>{t&&t.length&&(e.coachmarkMessageQueue?"object"==typeof e.coachmarkMessageQueue&&e.coachmarkMessageQueue.length&&(a=Object.assign({},e),a.coachmarkMessageQueue.push(...t),(a.messageIndex<0||a.messageIndex>=a.coachmarkMessageQueue.length)&&(a.messageIndex=a.coachmarkMessageQueue.length-1)):(a=Object.assign({},e),a.coachmarkMessageQueue=t,a.messageIndex=0),a.contentModuleExperienceName=a.coachmarkMessageQueue[a.messageIndex].name,a.addCoachmarkToPage=!0)}),r=r||_.a.handleAction(t,U.a.hideCoachmark,()=>{a=Object.assign({},e),a.addCoachmarkToPage=!1}),a||e}}var Q,V=a("+viU"),q=a("bZQK");(Q||(Q={})).inspect=function(e){const{config:t,state:a,connectorArgs:r}=e;let i=null;return a.addCoachmarkToPage&&a.coachmarkMessageQueue&&a.messageIndex>=0&&a.coachmarkMessageQueue[a.messageIndex]&&(i=a.coachmarkMessageQueue[a.messageIndex]),{props:Object.assign(Object.assign(Object.assign({},i),r),{titleTextSize:t.titleTextSize,bodyTextSize:t.bodyTextSize,mainBodyAriaLabelText:t.accessibility.ariaLabel.mainBody,pointerAriaLabelText:t.accessibility.ariaLabel.pointer,dismissButtonAriaLabelText:t.accessibility.ariaLabel.dismissButton,titleTextAriaLabelText:t.accessibility.ariaLabel.titleText,bodyTextAriaLabelText:t.accessibility.ariaLabel.bodyText,leadImageAltText:t.accessibility.ariaLabel.leadImageAltText,currentMessageIndex:a.messageIndex,addCoachmarkToPage:!!i,tabIndex:t.tabIndex,eventUrl:i&&i.eventUrl?i.eventUrl:void 0,rootTelemetryObject:r.telemetryObject,contentModuleExperienceName:a.contentModuleExperienceName?a.contentModuleExperienceName.replace(/\s/g,""):"coachmark_module_v2",requestContext:r.requestContext}),missingChildren:[]}};var K=a("U6Xm"),W=a("ljWX"),$=a("9J8d"),G=a("rvYQ"),X=a("WfnD"),Y=a("s9+9"),Z=a("XLvf");class J extends X.a{constructor(e,t,a,i,n,o,s){super(e,t,a,i,n,o,s),this.trackEventCallback=(e,t,a,r,i,n)=>{B.a&&B.a.sendActionEvent(t,i,n)},this.trackPartialImpressionCallback=(e,t,a,r)=>{B.a&&e&&B.a.observeElementTree(e)},this.trackAppErrorEventCallback=e=>{B.a&&B.a.sendAppErrorEvent(e)},this.reportEvent=(e,t,a,r,i)=>{this.coachmarkDataConnector?this.coachmarkDataConnector.reportEvent(e,t,a,r,i):this.trackAppErrorEventCallback(Object.assign(Object.assign({},y.L.CoachmarkDataConnectorUndefined),{message:"Coachmark data connector is undefined"}))},this.coachmarkPlaced=()=>Object(r.b)(this,void 0,void 0,(function*(){this.coachmarkDataConnector?K.a.updateCoachmarkVisibleStatus.getActionSender(this.coachmarkDataConnector).send(!0):this.trackAppErrorEventCallback(Object.assign(Object.assign({},y.L.CoachmarkDataConnectorUndefined),{message:"Coachmark data connector is undefined"}))})),this.removeCoachmarkFromPage=()=>U.a.removeCoachmarkFromPage.getActionSender(this).send(),this.updateCoachmark=()=>U.a.updateCoachmark.getActionSender(this).send(),this.timeoutTriggered=e=>U.a.timeoutOccurred.getActionSender(this).send(e),this.addCoachmarkMessages=e=>U.a.addCoachmarkMessages.getActionSender(this).send(e),this.hideCoachmark=()=>U.a.hideCoachmark.getActionSender(this).send(),this.isControl=G.a.CurrentRequestTargetScope&&G.a.CurrentRequestTargetScope.pageExperiments&&(-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-rewards-c")||-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-nurtryinfo-c")||-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-nurtoplist-c")||-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-perstip-c")),this.isTreatment=G.a.CurrentRequestTargetScope&&G.a.CurrentRequestTargetScope.pageExperiments&&(-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-rewards-t")||-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-nurtryinfo-t")||-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-nurtoplist-t")||-1!==G.a.CurrentRequestTargetScope.pageExperiments.indexOf("prg-perstip-t"))}onComponentConnect(e){return Object(r.b)(this,void 0,void 0,(function*(){yield X.a.prototype.onComponentConnect.call(this,e),e&&this.initializeCallbacks(e),this.updateTemplValueCallback||(this.updateTemplValueCallback=e=>{B.a.addOrUpdateTmplString(e)});const t=this.getCurrentState();if(t){const e=this.config&&this.config.messageList&&this.config.messageList.length>0;t.addCoachmarkToPage=e,t.messageIndex=e?0:-1,t.coachmarkMessageQueue=e?this.config.messageList:null}$.a.getInstance().rootReducer.getDataConnector(Y.a.CoachmarkData).then(e=>{e?(this.coachmarkDataConnector=e,K.a.addCoachmark.registerObserver(()=>{this.addCoachmarksToMessageQueue(e.getCurrentState().coachmarkMessages)}),e.getCoachmarks(W.c.MSNNewsCoachmark).then(e=>{this.addCoachmarksToMessageQueue(n.a.extractMessages(e))})):this.trackAppErrorEventCallback(Object.assign(Object.assign({},y.L.CoachmarkDataConnectorUndefined),{message:"Coachmark data connector is undefined"}))}),U.a.readyToAddCoachmark.getActionSender(this).send()}))}mapStateToProps(e,t){const a={config:this.config,state:e,connectorArgs:{removeCoachmarkFromPage:this.removeCoachmarkFromPage,updateCoachmark:this.updateCoachmark,timeoutTriggered:this.timeoutTriggered,addCoachmarkMessages:this.addCoachmarkMessages,hideCoachmark:this.hideCoachmark,trackEvent:this.trackEventCallback,trackPartialImpressionEvent:this.trackPartialImpressionCallback,trackAppErrorEvent:this.trackAppErrorEventCallback,telemetryObject:this.telemetryObject,updateTemplValue:this.updateTemplValueCallback,reportEvent:this.reportEvent,coachmarkPlaced:this.coachmarkPlaced,isControl:this.isControl,isTreatment:this.isTreatment,requestContext:this.requestContext}},r=Q.inspect(a).props;return Object.assign(Object.assign({},t),r)}addCoachmarksToMessageQueue(e){e&&e.length>0&&(this.removeCoachmarkFromPage(),this.addCoachmarkMessages(e))}initializeCallbacks(e){Object(Z.isFunction)(e.trackEventCallback)&&(this.trackEventCallback=e.trackEventCallback),Object(Z.isFunction)(e.trackPartialImpressionCallback)&&(this.trackPartialImpressionCallback=e.trackPartialImpressionCallback),Object(Z.isFunction)(e.trackAppErrorEventCallback)&&(this.trackAppErrorEventCallback=e.trackAppErrorEventCallback),Object(Z.isFunction)(e.updateTemplValueCallback)&&(this.updateTemplValueCallback=e.updateTemplValueCallback)}}var ee=a("qv6S");const te=Object(V.a)(e=>{const t=e&&e.direction?e.direction:v.a.ltr;return{coachmark_default:{color:h.c,"background-color":d.c,"border-radius":Object(C.a)(4),"box-shadow":"0 12.8px 28.8px rgba(0,0,0,.22), 0 2.4px 7.2px rgba(0,0,0,.18)",left:"0",outline:"none",padding:`${Object(C.a)(16)} ${Object(C.a)(16)} ${Object(C.a)(16)} ${Object(C.a)(16)}`,position:"fixed",top:"0","z-index":(f.a.Flyout+50).toString(),[m.D]:{background:"WindowText",color:m.a.text}},coachmark_title:Object.assign({"letter-spacing":"0.6px","margin-bottom":"8px","line-height":"20px","text-align":Object(E.b)("left","right",t),"max-width":Object(C.a)(252),"min-width":Object(C.a)(185)},Object(p.d)()),coachmark_body:{"text-align":Object(E.b)("left","right",t),"line-height":"20px","max-width":Object(C.a)(280),"min-width":Object(C.a)(185)},coachmark_ptr:{position:"absolute",fill:d.c},coachmark_close:{position:"absolute",width:Object(C.a)(24),height:Object(C.a)(24),"border-radius":"2px","&:hover":{"background-color":u.b,cursor:"pointer"},fill:h.c,top:Object(C.a)(4),[Object(E.b)("right","left",e.direction)]:Object(C.a)(4)},coachmark_container:{float:Object(E.b)("right","left",t)},coachmark_image:{float:Object(E.b)("left","right",t),"margin-right":Object(E.b)("16px","0px",t),"margin-left":Object(E.b)("0px","16px",t),width:"50px"},coachmark_ctaButton_container:{"max-width":Object(C.a)(280),"min-width":Object(C.a)(185),"margin-top":"16px"},coachmark_ctaButton:{width:"136px",height:"32px",background:Object(k.c)(d.c)(e),margin:"0px 8px 0px 0px","&:hover":{background:k.b},"border-radius":"2px","font-family":"Segoe UI","font-size":"12px","line-height":"16px",color:g.a,"border-width":"inherit"},coachmark_dismissButton:{width:"136px",height:"32px",background:Object(b.c)(d.c)(e),margin:"0px 0px 0px 0px","&:hover":{background:b.b},"border-radius":"2px",float:"right","font-family":"Segoe UI","font-size":"12px","line-height":"16px",color:h.c,"border-width":"inherit"}}})(R),ae={reactComponent:te,experienceConfigSchema:q.CoachmarkConfigSchema,defaultMockState:{},mockState:[{key:"preview",value:{}}],mockConfig:ee.mockConfig,inspector:Q.inspect}},bZQK:function(e,t){},kpPY:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return n}));a("nwjK");function r(e,...t){return e.replace(/{(\d+)}/g,(function(e,a){if(a>=t.length)return e;const r=t[a];return"number"==typeof r||r?r:""}))}function i(e,t,a=0){return!(!e||!t)&&e.substr(a,t.length)===t}function n(e){return!e||!e.trim()}},qv6S:function(e,t){}}]);