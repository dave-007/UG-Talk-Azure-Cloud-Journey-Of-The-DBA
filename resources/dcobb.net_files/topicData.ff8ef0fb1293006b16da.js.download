(window.webpackJsonp=window.webpackJsonp||[]).push([["topicData"],{"2Sqd":function(e,t,o){"use strict";o.r(t),o.d(t,"FollowState",(function(){return i.a})),o.d(t,"ResizeServiceImage",(function(){return d})),o.d(t,"TopicDataActions",(function(){return p.a})),o.d(t,"TopicDataConnector",(function(){return B})),o.d(t,"TopicDataReducer",(function(){return Y})),o.d(t,"TopicsFetchState",(function(){return s.a})),o.d(t,"ToolingInfo",(function(){return Z})),o.d(t,"clearTopicsCache",(function(){return n.a})),o.d(t,"registerTopicsCacheAppErrorCallback",(function(){return n.e}));var i=o("uH2+"),s=o("FRpP"),n=o("6urM"),c=o("ADRF"),r=o("SNCn");var a;!function(e){e[e.LetterBox=1]="LetterBox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.TmxResize=6]="TmxResize",e[e.AppExResize=7]="AppExResize",e[e.CustomCrop=8]="CustomCrop"}(a||(a={}));class d{constructor(e,t=0,o=0){this.url=e,this.height=t,this.width=o,this.mode=a.Crop,this.quality=60,this.url=(this.url||"").replace(/http:/,"https:").replace(/\?.*/,"")}static from(e){return e?new d(e.url,e.height,e.width):null}get src(){const e=[];return e.push({key:"w",value:Object(r.a)(this.width)}),e.push({key:"h",value:Object(r.a)(this.height)}),e.push({key:"m",value:Object(r.a)(this.mode)}),e.push({key:"q",value:Object(r.a)(this.quality)}),this.url+"?"+c.a.keyValueArrayToQueryString(e)}resizeTo(e,t){return this.width=t,this.height=e,this}}var l,p=o("FaCY"),u=o("D57K"),h=o("HxRh"),g=o("1w6q"),f=o("I6Lx"),b=o("ax+D"),T=o("dTwT"),m=o("XMd8"),v=o("tERu"),O=o("8X6I"),w=o("SSDD"),j=o("k112"),y=o("KUTD"),F=o("k3mM"),S=o("XLvf");!function(e){e.SysTag="SysTag",e.UserQuery="UserQuery"}(l||(l={}));var C,I=o("u5KZ"),E=o("C8K2");!function(e){e.topicCardBackupImageUrl="https://img-s-msn-com.akamaized.net/tenant/amp/entityid/AAtCmK3.img";e.TopicCardStandardDimensions={borderWidth:4,height:250,width:250,gutterSize:E.a},e.TopicCardImageStandardDimensions={height:242,width:242}}(C||(C={}));const k="feeds";var R=o("rvYQ"),A=o("6ADy"),U=o("KETb"),M=o("msIb"),D=o("hxZq"),L=o("hDMs"),P=o("MptA"),x=o("NuVg"),G=o("tMmC");class ${static TranslateToTopicGroups(e,t){if(G.a.logObjects(e),!b.a.isDefined(e)||!$.isValidCompositeCardResponse(e.value))throw new Error("Topics OneService response schema validation error: no valid topic groups found!");const o={topicGroupIds:[],topicGroupMap:{},topicMap:{}};return e.value[0].subCards.forEach(e=>{if($.isValidTopicGroup(e,!0)){const i=$.getTopics(e,t);b.a.arrayHasData(i)&&(i.forEach(e=>{o.topicMap[e.id]=e}),o.topicGroupMap[e.id]={id:e.id,nextPageUrl:e.nextPageUrl,title:e.title,topicIds:i.map(e=>e.id)},o.topicGroupIds.push(e.id))}}),o}static TranslateToRecommendedTopics(e){if(G.a.logObjects(e),!b.a.isDefined(e)&&e.value)throw new Error("Topics OneService response schema validation error: no valid topic group found!");return e.value.map(e=>{const t=Object.assign(Object.assign({},e),{name:e.title,feedType:null});return $.getTopic(t,null)})}static TranslateSingleTopicResponseToTopic(e){if(!b.a.isDefined(e)||!$.isValidCompositeCardResponse(e.value))throw new Error("Topics OneService response schema validation error: no valid followed topics found!");const t=e.value[0].subCards;return $.getTopic(t[0],null)}static TranslateToFollowedTopics(e){if(G.a.logObjects(e),!b.a.isDefined(e)||!b.a.arrayHasData(e.value))throw new Error("Topics OneService response schema validation error: no valid followed topics found!");const t=e.value,o={};return t.forEach(e=>{if(e&&e.id){const t={};t[e.id]=[{followState:"followed"}],e.title&&(e.name=e.title,delete e.title);const i=$.getTopic(e,t);o[i.id]=i}}),o}static getTopic(e,t,o){if(!Object(P.a)(e.id)||!Object(P.a)(e.name))return null;let s;if(s=t&&b.a.arrayHasData(t[e.id])?t[e.id][0]:{followState:i.a.Unfollowed},!b.a.isDefined(s))return null;o||(o=C.TopicCardImageStandardDimensions);const n=e.image,c=n&&n.url?d.from(n).resizeTo(o.height,o.width).src:C.topicCardBackupImageUrl;return{id:e.id,name:e.name,followState:s.followState===i.a.Unfollowed||s.followState===i.a.None?i.a.Unfollowed:i.a.Followed,imgSrc:c,href:L.a.generateTopicLink(e.id,e.name),feedType:e.feedType,canonicalName:e.canonicalName,isInferred:e.isInferred,branding:e.branding}}static getTopics(e,t){const o=[];return e.subCards.forEach(i=>{const s=$.getTopic(i,e.metadata,t);o.push(s)}),o}static isValidTopicGroup(e,t){return(!t||Object(P.a)(e.id))&&!Object(x.a)(e.metadata)&&b.a.arrayHasData(e.subCards)}static isValidCompositeCardResponse(e){return b.a.arrayHasData(e)&&b.a.arrayHasData(e[0].subCards)}}var q=o("/+Un"),N=o("YI90");class K{constructor(e){this.fetchImpl=e}getFollowedTopics(e,t){return Object(u.b)(this,void 0,void 0,(function*(){const o=yield this.getRequestInit(),i=yield this.getCommonParams(k),s=Object(D.b)(),n=[...i,{key:"queryType",value:"MyFeed"},{key:"$top",value:"1000"},{key:"allTopics",value:"true"},{key:"rndId",value:e?Object(N.a)(0,1e3).toString():null},{key:D.a,value:s?s.toString():null},{key:"responseSchema",value:"cardView"}];t&&n.push({key:"$orderby",value:"createdDateTime desc"});const c=this.getLocationData();c&&n.push({key:"location",value:c});const r=Object(A.d)("msn/topics");n.forEach(e=>e.value&&r.searchParams.set(e.key,e.value));const a=yield Object(U.a)(()=>Object(u.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(decodeURIComponent(r.href),o);if(!e.ok)throw Error(e.statusText);return e.json()})),"getUserTopics");return $.TranslateToFollowedTopics(a)}))}getRecommendedTopics(){return Object(u.b)(this,void 0,void 0,(function*(){const e=yield this.getRequestInit(),t=[...yield this.getCommonParams(k),{key:"queryType",value:"recommendations"},{key:"$select",value:"id,title,image"}],o=Object(A.d)("msn/topics/me/recommendations");t.forEach(e=>{e.value&&o.searchParams.set(e.key,e.value)});const i=yield Object(U.a)(()=>Object(u.b)(this,void 0,void 0,(function*(){const t=yield this.fetchImpl(decodeURIComponent(o.href),e);if(!t.ok)throw Error(t.statusText);return t.json()})),"getRecommendedTopics");return $.TranslateToRecommendedTopics(i)}))}getRelatedTopics(e,t){return Object(u.b)(this,void 0,void 0,(function*(){const o=Object(A.d)("news/topics/{id}/related".replace("{id}",e)),i=yield this.getCommonParams(k);t&&t>0&&i.push({key:"$top",value:t.toString()}),i.forEach(({key:e,value:t})=>{t&&o.searchParams.set(e,t)});const s=yield this.getRequestInit(),n=yield Object(U.a)(()=>this.fetchImpl(decodeURIComponent(o.href),s),"getRelatedTopics");if(!n.ok)throw new Error(n.statusText);if(204===n.status)return[];const c=yield n.json();return $.TranslateToRecommendedTopics(c)}))}getTopics(e,t){return Object(u.b)(this,void 0,void 0,(function*(){const o=yield this.getRequestInit(),i=yield this.getCommonParams(k),s=t||[...i,{key:"queryType",value:"Discover"},{key:"$top",value:"100"},{key:"$select",value:"id,name,image,feedType,canonicalName,branding"}],n=this.getLocationData();n&&s.push({key:"location",value:n});const c=Object(A.d)("msn/topics");s.forEach(e=>{e.value&&c.searchParams.set(e.key,e.value)});const r=yield Object(U.a)(()=>Object(u.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(decodeURIComponent(c.href),o);if(!e.ok)throw Error(e.statusText);return e.json()})),"getTopicGroups");return $.TranslateToTopicGroups(r,e)}))}getTopic(e){return Object(u.b)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),o=[...yield this.getCommonParams(k),{key:"ids",value:e}],i=this.getLocationData();i&&o.push({key:"location",value:i});const s=Object(A.d)("msn/topics");o.forEach(e=>{e.value&&s.searchParams.set(e.key,e.value)});const n=yield Object(U.a)(()=>Object(u.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(decodeURIComponent(s.href),t);if(!e.ok)throw Error(e.statusText);return e.json()})),"getTopic");return $.TranslateSingleTopicResponseToTopic(n)}))}updateTopicFollowingState(e,t,o){return Object(u.b)(this,void 0,void 0,(function*(){const i=Object(A.d)("Graph/Actions"),s=yield this.getRequestInit(),n=yield this.getCommonParams(k),c=this.getLocationData();if(c&&n.push({key:"location",value:c}),t){const t={actionType:"Follow"};e?t.targetId=e:o&&(t.definitionName=o),s.method="POST",s.headers["Content-Type"]="text/json",s.body=JSON.stringify(t),n.forEach(e=>e.value&&i.searchParams.set(e.key,e.value))}else{const t={key:"$filter",value:`actionType eq 'Follow' and (targetId eq '${e}')`};s.method="DELETE";[t,...n].forEach(e=>e.value&&i.searchParams.set(e.key,e.value))}return yield Object(U.a)(()=>Object(u.b)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(decodeURIComponent(i.href),s);if(!e.ok)throw Error(e.statusText);return e})),"updateTopicFollowingState")}))}restoreDefaultTopics(){return Object(u.b)(this,void 0,void 0,(function*(){const e=Object(A.d)("Graph/Actions"),t=yield this.getRequestInit();t.method="DELETE";[...yield this.getCommonParams(k),{key:"$filter",value:"actionType eq 'Follow'"}].forEach(t=>t.value&&e.searchParams.set(t.key,t.value));return yield Object(U.a)(()=>Object(u.b)(this,void 0,void 0,(function*(){const o=yield this.fetchImpl(decodeURIComponent(e.href),t);if(!o.ok)throw Error(o.statusText);return o})),"restoreDefaultTopics")}))}getLocationData(){const e=Object(f.a)();return e.ClientSettings&&e.ClientSettings.geo_lat&&e.ClientSettings.geo_long?`${e.ClientSettings.geo_lat}|${e.ClientSettings.geo_long}`:null}getCommonParams(e){return Object(u.b)(this,void 0,void 0,(function*(){return(yield this.isUserSignedIn())?M.a.getOneServiceParamsWithAuth(R.a.UserId,e):M.a.getOneServiceParamsWithoutAuth(R.a.UserId,e)}))}getRequestInit(e=null){return Object(u.b)(this,void 0,void 0,(function*(){return null==e&&(e={method:"GET"}),(yield this.isUserSignedIn())&&(e.credentials="include"),e.headers=yield M.a.getOneServiceHeaders(),e}))}isUserSignedIn(){return Object(u.b)(this,void 0,void 0,(function*(){const e=Object(f.a)().UserIsSignedIn;if(void 0!==e)return e;return(yield Object(q.b)())===v.c.SignedIn}))}}var H=o("HDSB"),V=o("PZnQ"),z=o("pMIE");class B extends g.a{constructor(e,t,o,i,s,c,r){super(e,t,o,i,s,c,r),this.fetchedAllFollowedTopics=!1,this.fetchedAllRecommendedTopics=!1,this.fetchedAllTopics=!1,Object(H.a)()?(this.serviceClient=new K(window.fetch.bind(window)),this.followedTopicsListKey=Object(n.b)("followedTopics")):this.serviceClient=new K(fetch),this.trackAppErrorEventCallback=I.a?I.a.sendAppErrorEvent:null,this.useUserCreatedOrder=Object(f.a)().CurrentFlights.indexOf("prg-navfr-t")>-1}registerTrackAppErrorEventCallback(e){this.trackAppErrorEventCallback=e}followTopic(e,t){return Object(u.b)(this,void 0,void 0,(function*(){const o=b.a.isNotNullOrUndefined(yield this.getFollowedTopic(e,t));return o&&(Object(j.a)(y.a.InterestsChange),Object(O.c)(w.a.InterestsChange),Object(D.d)()),o}))}getFollowedTopic(e,t){return Object(u.b)(this,void 0,void 0,(function*(){let o=null;return e&&(o=yield this.getTopic(e)),(!Object(S.isNullOrUndefined)(o)&&o.followState!==i.a.Followed||t)&&(e=o&&o.feedType!==l.UserQuery?e:null,t=o&&o.feedType===l.UserQuery?o.name:t,(yield this.updateTopicFollowingState(e,i.a.Followed,t))&&(o=yield this.getTopic(e),yield Object(n.g)(o,!0,this.followedTopicsListKey))),Object(S.isNullOrUndefined)(o)||o.followState!==i.a.Followed?void 0:o}))}getFollowedTopics(e){return Object(u.b)(this,void 0,void 0,(function*(){let t=this.getCurrentState().followedTopicIds;return this.fetchedAllFollowedTopics&&!e||(e=e||(yield this.gettingTopicsAfterMigration()),(yield this.fetchFollowedTopics(e))&&(t=this.getCurrentState().followedTopicIds,e&&Object(V.d)())),t}))}getOneServiceFollowedTopics(){return Object(u.b)(this,void 0,void 0,(function*(){try{return yield this.serviceClient.getFollowedTopics(!1,this.useUserCreatedOrder)}catch(e){this.trackAppError(Object.assign(Object.assign({},h.Fb.InterestsRetrieveFollowedTopicsError),{message:"Failed fetching one service followed topics",pb:Object.assign(Object.assign({},h.Fb.InterestsRetrieveFollowedTopicsError.pb),{customMessage:"Failed fetching one service followed topics. "+(e&&e.message)})}))}}))}getRecommendedTopics(){return Object(u.b)(this,void 0,void 0,(function*(){return this.fetchedAllRecommendedTopics||(yield this.fetchRecommendedTopics()),this.getCurrentState().recommendedTopics}))}getRelatedTopics(e,t){return Object(u.b)(this,void 0,void 0,(function*(){return this.serviceClient.getRelatedTopics(e,t)}))}getNextTopicsInList(e=null){return Object(u.b)(this,void 0,void 0,(function*(){let t=this.getCurrentState().topicListMap[e];return!Object(S.isUndefined)(t)&&Object(S.isString)(t.nextPageUrl)&&(yield this.fetchTopicGroup(e))&&(t=this.getCurrentState().topicListMap[e]),t}))}getTopic(e){return Object(u.b)(this,void 0,void 0,(function*(){let t=this.getCurrentState().topicMap[e];return Object(S.isUndefined)(t)&&(yield this.fetchTopic(e))&&(t=this.getCurrentState().topicMap[e]),t}))}getTopics(e){return Object(u.b)(this,void 0,void 0,(function*(){return this.fetchedAllTopics||(yield this.fetchTopics(e)),this.getCurrentState().topicMap}))}unfollowTopic(e,t){return Object(u.b)(this,void 0,void 0,(function*(){let o=yield this.updateTopicFollowingState(e,i.a.Unfollowed,null,t);if(o&&!t){Object(j.a)(y.a.InterestsChange),Object(O.c)(w.a.InterestsChange),Object(D.d)();const t=yield this.getTopic(e);Object(H.a)()&&(o=yield Object(n.g)(t,!1,this.followedTopicsListKey))}return o}))}restoreDefaultTopics(){return Object(u.b)(this,void 0,void 0,(function*(){try{return yield this.serviceClient.restoreDefaultTopics(),Object(j.a)(y.a.InterestsChange),Object(O.c)(w.a.InterestsChange),Object(D.d)(),yield F.b.purgeCacheAsync(F.a.followedTopics),yield this.getFollowedTopics(!0),!0}catch(e){return this.trackAppError(Object.assign(Object.assign({},h.Fb.FailedRestoringDefaultTopicsError),{message:"Failed restoring default set of followed interests",pb:Object.assign(Object.assign({},h.Fb.FailedRestoringDefaultTopicsError.pb),{customMessage:"Error: "+(e&&e.message)})})),!1}}))}fetchFollowedTopics(e){return Object(u.b)(this,void 0,void 0,(function*(){try{let t;!e&&Object(H.a)()&&(yield Object(n.d)(this.followedTopicsListKey),t=yield Object(n.c)(this.followedTopicsListKey));const o=t||(yield this.serviceClient.getFollowedTopics(e,this.useUserCreatedOrder));return t||(yield Object(n.f)(this.followedTopicsListKey,o,!0)),p.a.followedTopics.getActionSender(this).send(o,e),this.fetchedAllFollowedTopics=!0,!0}catch(e){return p.a.followedTopicsFailed.getActionSender(this).send(),this.trackAppError(Object.assign(Object.assign({},h.Fb.InterestsRetrieveFollowedTopicsError),{message:"Failed fetching followed topics",pb:Object.assign(Object.assign({},h.Fb.InterestsRetrieveFollowedTopicsError.pb),{customMessage:"Failed fetching followed topics. "+(e&&e.message)})})),!1}}))}fetchRecommendedTopics(){return Object(u.b)(this,void 0,void 0,(function*(){try{const e=yield this.serviceClient.getRecommendedTopics();return p.a.recommendedTopics.getActionSender(this).send(Object(z.a)(e)),this.fetchedAllRecommendedTopics=!0,!0}catch(e){return p.a.recommendedTopicsFailed.getActionSender(this).send(),this.trackAppError(Object.assign(Object.assign({},h.Fb.InterestsRetrieveRecommendedTopicsError),{message:"Failed fetching recommended topics",pb:Object.assign(Object.assign({},h.Fb.InterestsRetrieveRecommendedTopicsError.pb),{customMessage:"Failed fetching recommended topics. "+(e&&e.message)})})),!1}}))}fetchTopic(e){return Object(u.b)(this,void 0,void 0,(function*(){try{const t=yield this.serviceClient.getTopic(e),o=this.getCurrentState().topicMap[e];return(Object(S.isUndefined)(o)||o.followState!==t.followState)&&p.a.topic.getActionSender(this).send(t),!0}catch(t){return p.a.followedTopicsFailed.getActionSender(this).send(),this.trackAppError(Object.assign(Object.assign({},h.Fb.InterestsRetrieveTopicsError),{message:"Failed to fetch topic.",pb:Object.assign(Object.assign({},h.Fb.InterestsRetrieveTopicsError.pb),{customMessage:`Failed to fetch topic ${e}. ${t&&t.message}`})})),!1}}))}fetchTopicGroup(e){return Object(u.b)(this,void 0,void 0,(function*(){if(!e)return!1;const t=this.getCurrentState().topicListMap[e],o=Object(S.isUndefined)(t)||t.nextPageUrl;if(!Object(S.isString)(o))return!1;const i=c.a.getParamsFromUrl(o);if(null===i)return!1;try{const t=yield this.serviceClient.getTopics(null,i);return p.a.topicGroup.getActionSender(this).send(t.topicGroupMap[e],t.topicMap),!0}catch(t){return p.a.topicGroupFailed.getActionSender(this).send(e),this.trackAppError(Object.assign(Object.assign({},h.Fb.InterestsRetrieveTopicsError),{message:"Failed to get topics list.",pb:Object.assign(Object.assign({},h.Fb.InterestsRetrieveTopicsError.pb),{customMessage:`Failed to get topics list ${e}. ${t&&t.message}`})})),!1}}))}fetchTopics(e){return Object(u.b)(this,void 0,void 0,(function*(){try{const t=yield this.serviceClient.getTopics(e);return p.a.topics.getActionSender(this).send(t),this.fetchedAllTopics=!0,!0}catch(e){return p.a.topicsFailed.getActionSender(this).send(),this.trackAppError(Object.assign(Object.assign({},h.Fb.InterestsRetrieveTopicsError),{message:"Failed fetching topics.",pb:Object.assign(Object.assign({},h.Fb.InterestsRetrieveTopicsError.pb),{customMessage:"Failed fetching topics. "+(e&&e.message)})})),!1}}))}updateTopicFollowingState(e,t,o,s){return Object(u.b)(this,void 0,void 0,(function*(){try{return yield this.serviceClient.updateTopicFollowingState(e,t!==i.a.Unfollowed,o),s?!0:(yield F.b.purgeCacheAsync(F.a.followedTopics),Object(S.isNullOrUndefined)(e)&&t!==i.a.Unfollowed?this.getFollowedTopics(!0):p.a.updateTopicFollowedState.getActionSender(this).send(e,t,this.useUserCreatedOrder),!0)}catch(o){return p.a.updateTopicFollowedStateFailed.getActionSender(this).send(e,t),this.trackAppError(Object.assign(Object.assign({},t?h.Fb.InterestsFollowTopicError:h.Fb.InterestsUnfollowTopicError),{message:"Failed to update topic followed state.",pb:Object.assign(Object.assign({},t?h.Fb.InterestsFollowTopicError.pb:h.Fb.InterestsUnfollowTopicError.pb),{customMessage:`Failed to update followed state to ${t} for ${e}. ${o&&o.message}`})})),!1}}))}gettingTopicsAfterMigration(){return Object(u.b)(this,void 0,void 0,(function*(){return!(!T.a.getItem(m.a.InterestsNeedRefresh)||(yield Object(q.b)())!==v.c.SignedIn)&&(T.a.removeItem(m.a.InterestsNeedRefresh),!0)}))}trackAppError(e){this.trackAppErrorEventCallback&&this.trackAppErrorEventCallback(Object.assign(Object.assign({},e),{source:"TopicData.connector.ts"}))}}var Q=o("05Au"),X=o("Z+pL");class Y{reduce(e,t){if(!e)return{followedTopicIds:[],recommendedTopics:[],topicListIds:[],topicListMap:{},topicMap:{},topicsFetchState:s.a.InProgress};if(!t)return e;let o,n=!1;return n=n||Q.a.handleAction(t,p.a.followedTopics,(t,i)=>{if(!t)return;const n=Object.assign({},e.topicMap);o=Object.assign(Object.assign({},e),{topicMap:n,topicsFetchState:s.a.Loaded});const c=[];Object.keys(t).forEach(e=>{c.push(e);const o=t[e];n[e]=o}),o.followedTopicIds=i?c:Object(X.a)(o.followedTopicIds,c),this.updateFollowState(o)}),n=n||Q.a.handleAction(t,p.a.recommendedTopics,t=>{if(!t)return;const i=Object.assign({},e.topicMap);t.forEach(e=>{i[e.id]||(i[e.id]=e)}),o=Object.assign(Object.assign({},e),{recommendedTopics:t,topicMap:i,topicsFetchState:s.a.Loaded}),this.updateFollowState(o)}),n=n||Q.a.handleAction(t,p.a.topic,t=>{const i=Object.assign({},e.topicMap);i[t.id]=t,o=Object.assign(Object.assign({},e),{topicMap:i,topicsFetchState:s.a.Loaded})}),n=n||Q.a.handleAction(t,p.a.topics,t=>{if(!t)return;const i=Object.assign({},e.topicMap);Object.keys(t.topicMap).forEach(o=>{const s=e.topicMap[o];i[o]=Object.assign(Object.assign({},t.topicMap[o]),{isInferred:s&&s.isInferred})}),o=Object.assign(Object.assign({},e),{topicListIds:t.topicGroupIds,topicListMap:t.topicGroupMap,topicMap:i,topicsFetchState:s.a.Loaded}),this.updateFollowState(o)}),n=n||Q.a.handleAction(t,p.a.topicGroup,(t,i)=>{if(!t||!t.topicIds||0===t.topicIds.length||!i)return;const n=Object.assign({},e.topicListMap),c=Object.assign({},e.topicMap),r=n[t.id];t.nextPageUrl&&(r.nextPageUrl=t.nextPageUrl),r&&r.topicIds&&(r.topicIds=Object(X.a)(r.topicIds,t.topicIds)),t.topicIds.forEach(e=>{c[e]=i[e]}),o=Object.assign(Object.assign({},e),{topicListMap:n,topicMap:c,topicsFetchState:s.a.Loaded}),this.updateFollowState(o)}),n=n||Q.a.handleAction(t,p.a.updateTopicFollowedState,(t,s,n)=>{const c=Object.assign({},e.topicMap),r=e.followedTopicIds.slice(),a=e.topicMap[t];if(s!==i.a.Unfollowed){if(Object(x.a)(a)){const e={followState:i.a.Followed,id:t,name:""};c[t]=e}else{if(a.followState===i.a.Followed)return;c[t].followState=i.a.Followed,o=Object.assign(Object.assign({},e),{topicMap:c})}n?r.unshift(t):r.push(t)}else{if(Object(x.a)(a))return;c[t].followState=i.a.Unfollowed;const e=r.indexOf(t);r.splice(e,1)}const d=e.recommendedTopics.map(e=>Object.assign(Object.assign({},e),{followState:e.id===t?s:e.followState}));o=Object.assign(Object.assign({},e),{followedTopicIds:r,topicMap:c,recommendedTopics:d})}),n=n||Q.a.handleAction(t,p.a.recommendedTopicsFailed,()=>{o=Object.assign(Object.assign({},e),{topicsFetchState:s.a.Failed})}),n=n||Q.a.handleAction(t,p.a.followedTopicsFailed,()=>{o=Object.assign(Object.assign({},e),{topicsFetchState:s.a.Failed})}),o||e}updateFollowState(e){const{followedTopicIds:t}=e;Object.keys(e.topicMap).forEach(o=>{const s=e.topicMap[o];s&&(s.followState=t.includes(o)?i.a.Followed:i.a.Unfollowed)}),e.recommendedTopics.forEach(e=>{e.followState=t.includes(e.id)?i.a.Followed:i.a.Unfollowed})}}const Z={experienceConfigSchema:{}}},FRpP:function(e,t,o){"use strict";var i;o.d(t,"a",(function(){return i})),function(e){e[e.InProgress=0]="InProgress",e[e.Loaded=1]="Loaded",e[e.Failed=2]="Failed"}(i||(i={}))},FaCY:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o("G82u");class s{}s.followedTopics=new i.a("FollowedTopics"),s.followedTopicsFailed=new i.a("FollowedTopicsFailedSignature"),s.recommendedTopics=new i.a("RecommendedTopics"),s.recommendedTopicsFailed=new i.a("RecommendedTopicsFailed"),s.topic=new i.a("Topic"),s.topicFailed=new i.a("TopicsFailed"),s.topics=new i.a("Topics"),s.topicsFailed=new i.a("TopicsFailed"),s.topicGroup=new i.a("TopicGroup"),s.topicGroupFailed=new i.a("TopicGroupFailed"),s.updateTopicFollowedState=new i.a("UpdateTopicFollowedState"),s.updateTopicFollowedStateFailed=new i.a("UpdateTopicFollowedStateFailed")},XMd8:function(e,t,o){"use strict";var i;o.d(t,"a",(function(){return i})),function(e){e.InterestsNeedRefresh="interests-need-refresh"}(i||(i={}))},hDMs:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var i,s=o("ADRF"),n=o("rvYQ");!function(e){e.contentUrlPrefixLookup={article:"ar",video:"vi",slideshow:"ss"},e.generateTopicLink=function(e,t){const o=s.a.encodeURIComponentForPrime(t).toLowerCase(),{HostPage:i}=n.a;if(i){const t=new URL(i.originalUrl);return t.origin+"/"+i.verticalKey+"/"+i.categoryKey+"/interests/"+o+"/"+n.a.CurrentMarket+"/f-"+e+t.search}return"https://www.msn.com"},e.generateContentLink=function(t,o,i,s,c){return t&&o&&i&&s&&c?`/${n.a.CurrentMarket}/${t}/${o}/${s}/${e.contentUrlPrefixLookup[c]}-${i}`:"/"}}(i||(i={}))},hxZq:function(e,t,o){"use strict";o.d(t,"a",(function(){return h})),o.d(t,"d",(function(){return g})),o.d(t,"b",(function(){return f})),o.d(t,"c",(function(){return b}));var i=o("pAXR"),s=o("k3mM"),n=o("rvYQ"),c=o("zfSW"),r=o("s9+9"),a=o("HxRh"),d=o("9J8d"),l=o("u5KZ"),p=o("l+Jz"),u=o("tWvP");const h="cbypass";function g(){const e=d.a.getInstance().rootReducer.connector(r.a.OneServiceContent);if(!e)return void(l.a&&l.a.sendAppErrorEvent(a.hc.FailedToUpdateBypassValueConnectorNotInitialized));const t=Date.now();return Object(u.a)(h,t.toString(),10/1440,n.a.HostPage.topDomain,"/"),i.a.updateCacheBypassValue.getActionSender(e).send(t),s.b.purgeCacheAsync(s.a.river).then(()=>{Object(c.c)({id:p.a.UpdateMyFeed,payload:t})})}function f(){const e=d.a.getInstance().rootReducer.connector(r.a.OneServiceContent);return e?e.getCurrentState().cacheBypassValue:0}function b(e){const t=f();t>0&&e.searchParams.set(h,t.toString())}},pAXR:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o("G82u");class s{}s.updateCacheBypassValue=new i.a("UpdateCacheBypassValue")},"uH2+":function(e,t,o){"use strict";var i;o.d(t,"a",(function(){return i})),function(e){e.Followed="followed",e.Unfollowed="unfollowed",e.Locked="locked",e.None="none"}(i||(i={}))}}]);