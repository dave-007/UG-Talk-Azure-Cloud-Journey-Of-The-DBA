(window.webpackJsonp=window.webpackJsonp||[]).push([["notification-bell"],{"4DIY":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("sQxI"),s=i("+viU"),o=i("8dPK");const a=Object(s.a)(o.a)(n.default)},"6xGu":function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"c",(function(){return O})),i.d(t,"d",(function(){return S})),i.d(t,"e",(function(){return w})),i.d(t,"f",(function(){return y})),i.d(t,"i",(function(){return C})),i.d(t,"h",(function(){return k})),i.d(t,"g",(function(){return x})),i.d(t,"b",(function(){return j})),i.d(t,"j",(function(){return T}));var n,s=i("pCrc"),o=i("y2Il"),a=i("rvYQ"),r=i("ADRF"),c=i("I6Lx"),l=i("Fpjf"),p=i("aHCm"),d=i("u5KZ"),g=i("Am8i");!function(e){e[e.linksPointToPartner=2]="linksPointToPartner"}(n||(n={}));var h=i("HxRh"),u=i("ERkP"),b=i.n(u),m=i("kpPY");const f={ArticlePreview:"ar",SlideshowPreview:"ss",VideoPreview:"vi"};function v(e){const{abstract:t}=e;if(t)return{dangerouslySetInnerHTML:{__html:t}}}function O(e,t,i,s){if(e.renderingRestriction===n.linksPointToPartner){if(e.sourceHref)return e.sourceHref;d.a.sendAppErrorEvent(Object.assign(Object.assign({},h.Qb),{message:"Content with rendering restriction 'link to partner' is missing source HREF",pb:Object.assign(Object.assign({},h.Qb.pb),{customMessage:"Content Id: "+e.id})}))}if(e.destinationUrl)return e.destinationUrl;const o=Object(a.b)().contentLinkHost,l=f[e.type]||"xx";i=r.a.encodeURIComponentForPrime(i||""),s=r.a.encodeURIComponentForPrime(s||"");const p=encodeURIComponent(e.uriTitle||"");let g="";return c.b&&c.b.ClientSettings&&c.b.ClientSettings.forwardablequeryparams&&(g="?"+c.b.ClientSettings.forwardablequeryparams),`https://${o}/${t}/${i}/${s}/${p}/${l}-${e.id}${g}`}function S(e,t,i,n,s,o,a){if(!e||!i)return null;const{category:r,id:c,title:l,provider:p,sourceHref:d}=e;return i.addOrUpdateChild({name:"destination",type:o||g.e.Headline,action:g.a.Click,behavior:a||g.b.Navigate,content:{id:c,category:r&&r.label?r.label:s,headline:l,vertical:r&&r.product||null,brand:p&&p.name||null},destinationUrl:n,feed:{id:t||null}}).render()}function w(e,t){return{tag:o.b.h3,size:t,children:e.title}}function y(e,t,i=60){const n=e.images&&e.images[0],{attribution:s,caption:o=e.title,id:a,focalRegion:r}=n||{};if(!a)return;const c=[];let p;o&&c.push(o),s&&c.push(s),c.length&&(p=c.join(" - "));return{src:Object(l.d)(a,{width:t.width,height:t.height,focalRegion:r,enableDpiScaling:!1,quality:i}),alt:p,title:p,style:{maxHeight:t.height}}}function C(e){const{provider:t}=e;if(!t)return;const{name:i,logo:n}=e.provider;return n&&n.id?{src:`${p.a.prod}${n.id}?w=16&h=16`,alt:i}:void 0}function k(e,t){const{provider:i}=e;if(!i)return;const{name:n}=e.provider;return n?{children:n,image:t?e=>b.a.createElement(s.a,Object.assign(Object.assign({},t),{className:e})):null}:void 0}function x(e,t,i=!0){if(!e)return;const{title:n,images:s}=e,o=s&&s[0];return N(n,o&&o.attribution,t,i)}function j(e,t){if(!e)return;const{title:i,provider:n}=e;return N(i,n&&n.name,t,!0)}function N(e,t,i,n){const s=[];e&&s.push(e);let o,a="";return i&&t?a=Object(m.a)(i,t):t&&(a=t),n&&a.length&&s.push(a),s.length&&(o=s.join(" - ")),o}function T(e,t){const{width:i,height:n}=e;if(t||(t=window.innerWidth>440?440:window.innerWidth),i===t)return e;return{width:t,height:Math.floor(t/i*n)}}},"8H6j":function(e,t,i){"use strict";var n=i("OnwC"),s=i("o1qX"),o=i("ERkP"),a=i.n(o),r=i("eGM7"),c=i("fi3J");class l extends n.a{constructor(){super(...arguments),this.handledProps={managedClasses:void 0,role:void 0}}render(){return a.a.createElement("hr",Object.assign({},this.unhandledProps(),this.generateAttributes(),{className:this.generateClassNames()}))}generateAttributes(){if(this.props.role&&this.props.role!==c.a.separator)return{role:c.a[this.props.role]}}generateClassNames(){return super.generateClassNames(Object(s.a)(this.props.managedClasses.divider))}}l.displayName=r.DisplayNamePrefix+"Divider",l.defaultProps={managedClasses:{}};var p=l;t.a=p},"8dPK":function(e,t,i){"use strict";var n=i("mIHV"),s=i("rRWH"),o=i("3ZGc"),a=i("fz//"),r=i("iuMt"),c=i("8yfO"),l=i("SP+O"),p=i("BOd3"),d=i("aB5Y"),g=i("aP31"),h=i("9CwC"),u=i("GaXA"),b=i("zP2P"),m=i("MF9s"),f=i("ZEO0"),v=i("objN"),O=i("NZin");const S=Object(n.a)(Object(n.b)(Object(b.e)(),2),m.p),w=Object(n.c)(S,2),y=Object(n.a)(m.p,Object(b.a)(0,1,2)),C=Object(n.d)(S,Object(n.c)(y,2)),k=Object(n.d)(w,y,C),x={toggle:{display:"inline-block",color:l.c,transition:"all 0.2s ease-in-out",[v.D]:Object.assign({},v.w)},toggle_label:Object.assign(Object.assign(Object.assign({},Object(f.c)()),Object(c.b)("t7")),{display:"block","padding-bottom":"7px",clear:"both"}),toggle_toggleButton:Object.assign(Object.assign({},Object(f.c)()),{position:"relative","margin-top":"0",float:Object(s.c)("left","right")}),toggle_stateIndicator:{position:"absolute","pointer-events":"none",top:Object(o.a)(y),left:Object(s.c)(Object(o.a)(y),"unset"),right:Object(s.c)("unset",Object(o.a)(y)),transition:"all .1s ease","border-radius":Object(o.a)(C),width:Object(o.a)(C),height:Object(o.a)(C),background:l.c},toggle_input:Object.assign(Object.assign(Object.assign(Object.assign({},Object(f.c)()),{display:"block",position:"relative",margin:"0",width:Object(o.a)(w),height:Object(o.a)(S),background:p.c,border:Object(a.a)("{0} solid {1}",Object(o.a)(m.X),d.c),"border-radius":Object(o.a)(S),appearance:"none","-webkit-appearance":"none","-moz-appearance":"none",outline:"none","&:active":{background:p.a,"border-color":d.a,[v.D]:{background:v.a.selectedBackground,"border-color":v.a.selectedText,"& + span":{background:v.a.selectedText}}},"&:hover":{background:p.b,"border-color":d.b,[v.D]:{background:v.a.background,"border-color":v.a.selectedBackground,"& + span":{background:v.a.selectedBackground}}}}),Object(r.a)(Object.assign(Object.assign({},O.a),v.n))),{[v.D]:{background:v.a.background,"border-color":v.a.buttonText,"& + span":{background:v.a.buttonText}}}),toggle__checked:{"& $toggle_input":{background:g.c,"border-color":g.c,"&:disabled":{"& $toggle_input, & $toggle_label, & $toggle_statusMessage":{[v.D]:{background:"transparent","border-color":Object(a.b)(v.a.disabledText),color:Object(a.b)(v.a.disabledText),"& + span":{background:Object(a.b)(v.a.disabledText)}}}},"&:hover":{[v.D]:{background:v.a.selectedText,"border-color":v.a.selectedBackground,"& + span":{background:v.a.selectedBackground}}},"&:active":{[v.D]:{background:Object(a.b)(v.a.selectedBackground),"border-color":Object(a.b)(v.a.selectedBackground),"& + span":{background:Object(a.b)(v.a.selectedText)}}},[v.D]:{background:v.a.selectedBackground,"border-color":v.a.selectedBackground,"& + span":{background:v.a.selectedText}}},"& $toggle_stateIndicator":{left:Object(s.c)(Object(o.a)(k),"unset"),right:Object(s.c)("unset",Object(o.a)(k)),background:h.a}},toggle__disabled:Object.assign(Object.assign({},Object(u.a)()),{"& $toggle_input, & $toggle_label, & $toggle_statusMessage":Object.assign(Object.assign({},Object(f.b)()),{[v.D]:{background:"transparent","border-color":Object(a.b)(v.a.disabledText),color:Object(a.b)(v.a.disabledText),"& + span":{background:Object(a.b)(v.a.disabledText)}}})}),toggle_statusMessage:Object.assign(Object.assign(Object.assign({},Object(c.b)("t7")),{"line-height":Object(o.a)(S),float:Object(s.c)("left","right"),"padding-left":Object(s.c)("6px",""),"padding-right":Object(s.c)("","6px"),"user-select":"none","margin-top":"0","padding-bottom":"0"}),v.F)};t.a=x},Brke:function(e,t){},DngS:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ERkP"),s=i.n(n),o=i("IATt");class a extends o.a{constructor(){super(...arguments),this.handledProps={managedClasses:void 0,titleText:void 0}}render(){return s.a.createElement("svg",Object.assign({},this.unhandledProps()),this.renderTitleText(this.props),s.a.createElement("path",{d:"M14.0918 19.9707L4.11133 10L14.0918 0.0292969L14.9707 0.908203L5.88867 10L14.9707 19.0918L14.0918 19.9707Z"}))}}a.defaultProps={viewBox:"0 0 20 20",width:"20px",height:"20px",xmlns:"http://www.w3.org/2000/svg"}},FWTu:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("8yfO"),s=i("mObi");const o=Object(s.a)(e=>{if(!e)return null;const t=n.h["t"+e];return{fontSize:t.fontSize+"px",lineHeight:t.lineHeight+"px"}})},Fpjf:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return p})),i.d(t,"c",(function(){return d}));var n=i("aHCm"),s=i("HDSB"),o=i("0hJ9");let a;var r,c;!function(e){e.JPG="jpg",e.PNG="png"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Letterbox=1]="Letterbox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.FacialCrop=6]="FacialCrop"}(c||(c={}));const l=90;function p(e,t){return d(n.a.prod+e,t)}function d(e,t){const{focalRegion:i,backgroundColor:n}=t;let{width:c=0,height:l=0,format:p=r.JPG}=t,d="";if(i){const e=g(i.x1,i.x2),t=g(i.y1,i.y2);null!=e&&null!=t&&(d+=`&x=${e}&y=${t}`)}n&&(d+="&b="+n);const h=null==t.mode?6:t.mode;if(6===h&&(d+="&u=t"),t.enableDpiScaling){const e=function(){if(a)return a;if(!Object(s.a)()||!window.devicePixelRatio||window.devicePixelRatio<1)return null;a=window.devicePixelRatio,Object(o.a)(4*a)||(a=Math.ceil(10*a)/10);a>3&&(a=3);return a}();e&&(c=Math.round(c*e),l=Math.round(l*e))}return`${e}?w=${c}&h=${l}&q=${t.quality||60}&m=${h}&f=${p}${d}`}function g(e,t){if(null!=e&&null!=t)return Math.floor((e+t)/2)}},MlPa:function(e,t,i){"use strict";var n=i("OnwC"),s=i("o1qX"),o=i("ERkP"),a=i.n(o),r=i("eGM7"),c=i("Brke");i.o(c,"AutoSuggestContext")&&i.d(t,"AutoSuggestContext",(function(){return c.AutoSuggestContext})),i.o(c,"ButtonDirection")&&i.d(t,"ButtonDirection",(function(){return c.ButtonDirection})),i.o(c,"ProgressType")&&i.d(t,"ProgressType",(function(){return c.ProgressType})),i.o(c,"RadioSlot")&&i.d(t,"RadioSlot",(function(){return c.RadioSlot}));class l extends n.a{constructor(e){super(e),this.handledProps={managedClasses:void 0,disabled:void 0,inputId:void 0,labelId:void 0,name:void 0,selected:void 0,selectedMessage:void 0,statusMessageId:void 0,unselectedMessage:void 0,onChange:void 0},this.handleToggleChange=e=>{"boolean"!=typeof this.props.selected&&this.setState({selected:!this.state.selected}),this.props.onChange&&this.props.onChange(e)},this.state={selected:this.props.selected||!1}}static getDerivedStateFromProps(e,t){return"boolean"==typeof e.selected&&e.selected!==t.selected?{selected:e.selected}:null}render(){const{toggle_toggleButton:e,toggle_input:t,toggle_stateIndicator:i}=this.props.managedClasses;return a.a.createElement("div",Object.assign({},this.unhandledProps(),{className:this.generateClassNames(),"aria-disabled":this.props.disabled||null}),this.generateLabel(),a.a.createElement("div",{className:Object(s.a)(e)},a.a.createElement("input",{className:Object(s.a)(t),type:"checkbox",id:this.props.inputId,"aria-describedby":this.props.statusMessageId,disabled:this.props.disabled,name:this.props.name,value:this.generateToggleStateLabel(),onChange:this.handleToggleChange,checked:this.state.selected}),a.a.createElement("span",{className:Object(s.a)(i)})),this.renderStatusMessage())}generateClassNames(){const{toggle:e,toggle__disabled:t,toggle__checked:i}=this.props.managedClasses;return super.generateClassNames(Object(s.a)(e,[t,this.props.disabled],[i,this.state.selected]))}generateToggleStateLabel(){return this.state.selected?this.props.selectedMessage:this.props.unselectedMessage}generateLabel(){if(this.props.labelId||this.props.children)return a.a.createElement("label",{className:Object(s.a)(this.props.managedClasses.toggle_label),id:this.props.labelId,htmlFor:this.props.inputId},this.props.children)}renderStatusMessage(){if(this.props.selectedMessage||this.props.unselectedMessage)return a.a.createElement("span",{id:this.props.statusMessageId,className:Object(s.a)(this.props.managedClasses.toggle_statusMessage)},this.generateToggleStateLabel())}}l.displayName=r.DisplayNamePrefix+"Toggle",l.defaultProps={managedClasses:{}},t.default=l},Nn6R:function(e,t,i){"use strict";var n=i("fz//"),s=i("3ZGc"),o=i("MF9s"),a=i("zeXT"),r=i("objN");const c={divider:Object.assign({"box-sizing":"content-box",height:"0",margin:"0",border:"none","border-top":Object(n.a)("{0} solid {1}",Object(s.a)(o.X),a.a),transition:"all 0.2s ease-in-out"},r.e)};t.a=c},Oa3u:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"b",(function(){return c}));const n=new RegExp("\\:([\\d]{2})");function s(e){return((new Date).getTime()-e.getTime())/1e3}function o(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function a(e,t){return new Date(e.valueOf()+60*t*60*1e3)}function r(e,t){const i=parseInt(t),s=parseInt(n.exec(t)[1]),o=i<0?-1:1,a=new Date(e.getTime()+60*(60*i+o*s)*1e3),r=("0"+Math.abs(i)).substr(-2)+":"+("0"+Math.abs(s)).substr(-2);return a.toISOString().replace("Z",(o<0?"-":"+")+r)}function c(e){const t=s(e),i=function(){const e=new Date;return e.setHours(0,0,0,0),e}(),n=o(i,-1),a=o(i,-6),r=function(){const e=new Date;return new Date(e.getFullYear(),0,0,0,0,0,0)}();return t<0?0:t<120?1:t<3600?2:e>=i?3:e>=n?4:e>=a?5:e>=r?6:7}},Wwow:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("8H6j"),s=i("+viU"),o=i("Nn6R");const a=Object(s.a)(o.a)(n.a)},aB5Y:function(e,t,i){"use strict";i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return d}));var n=i("mIHV"),s=i("MF9s"),o=i("6QMD"),a=i("LCcN");const r=Object(o.d)(Object(a.a)(s.W,3,0,Object(n.d)(s.U,s.V),Object(n.d)(s.S,s.V),Object(n.d)(s.T,s.V))),c=Object(o.d)(r),l=Object(o.j)(o.a.rest,c),p=Object(o.j)(o.a.hover,c),d=Object(o.j)(o.a.active,c);Object(o.j)(o.a.focus,c)},aHzZ:function(e,t,i){"use strict";i.r(t),i.d(t,"NotificationBell",(function(){return rt})),i.d(t,"NotificationBellActions",(function(){return o})),i.d(t,"NotificationBellConnector",(function(){return tt})),i.d(t,"NotificationBellReducer",(function(){return nt})),i.d(t,"ToolingInfo",(function(){return ct}));var n=i("+viU"),s=i("G82u");class o{}o.desktopNotificationsBlocked=new s.a("desktopNotificationsBlocked"),o.SetData=new s.a("SetData"),o.popoverVisible=new s.a("ChangeShareDialogState"),o.setRenderState=new s.a("ChangeSettingsDialogState"),o.settingsSave=new s.a("SaveSettings"),o.switchImageOfTheDay=new s.a("SwitchImageOfTheDay");var a=i("5mwN"),r=i("plCa"),c=i("Jw3B"),l=i("4YCp"),p=i("k0Z1"),d=i("Zp2t"),g=i("FPTP"),h=i("Wwow"),u=i("uT2j"),b=i("QhQn"),m=i("MZhw"),f=i("aP31"),v=i("8yfO"),O=i("HZZz"),S=i("SP+O"),w=i("0fst"),y=i("rRWH");const C=b.b,k=b.c,x={actionTrigger:{"box-sizing":"border-box !important"}};var j=i("DngS"),N=i("ERkP"),T=i.n(N),P=i("IATt");class D extends P.a{constructor(){super(...arguments),this.handledProps={managedClasses:void 0,titleText:void 0}}render(){return T.a.createElement("svg",Object.assign({},this.unhandledProps()),this.renderTitleText(this.props),T.a.createElement("path",{d:"M7.86192 14.8619C8.01813 14.8619 8.1669 14.8322 8.30823 14.7727C8.44212 14.7132 8.56113 14.6313 8.66527 14.5272C8.76941 14.4231 8.85123 14.3003 8.91074 14.159C8.97025 14.0251 9 13.8763 9 13.7127H6.71269C6.71269 13.8763 6.74245 14.0251 6.80195 14.159C6.86146 14.3003 6.94328 14.4231 7.04742 14.5272C7.15156 14.6313 7.27429 14.7132 7.41562 14.7727C7.54951 14.8322 7.69828 14.8619 7.86192 14.8619ZM12.4254 12.5746V5.71269C12.4254 5.08043 12.3064 4.48907 12.0683 3.93863C11.8229 3.38819 11.4956 2.9047 11.0865 2.48815C10.6699 2.07159 10.1864 1.74431 9.63598 1.50628C9.0781 1.26081 8.48675 1.13808 7.86192 1.13808C7.22966 1.13808 6.63459 1.26081 6.07671 1.50628C5.52627 1.74431 5.04277 2.07159 4.62622 2.48815C4.21711 2.89726 3.88982 3.38075 3.64435 3.93863C3.40632 4.48907 3.28731 5.08043 3.28731 5.71269V12.5746H12.4254ZM14.7127 12.5746V13.7127H10.1381C10.1381 14.0325 10.0786 14.3301 9.95955 14.6053C9.84054 14.8805 9.67689 15.1223 9.46862 15.3305C9.26034 15.5388 9.0186 15.7025 8.74338 15.8215C8.46815 15.9405 8.17434 16 7.86192 16C7.54207 16 7.24454 15.9405 6.96932 15.8215C6.6941 15.7025 6.45235 15.5388 6.24407 15.3305C6.0358 15.1223 5.87215 14.8805 5.75314 14.6053C5.63412 14.3301 5.57462 14.0325 5.57462 13.7127H1V12.5746H2.13808V5.71269C2.13808 5.192 2.20874 4.68619 2.35007 4.19526C2.48396 3.70432 2.67364 3.25058 2.91911 2.83403C3.17201 2.41004 3.46955 2.02325 3.81172 1.67364C4.16132 1.32404 4.54812 1.0265 4.97211 0.781032C5.39609 0.535565 5.85356 0.342166 6.34449 0.200837C6.82799 0.0669456 7.3338 0 7.86192 0C8.38261 0 8.88842 0.0669456 9.37936 0.200837C9.86285 0.342166 10.3166 0.535565 10.7406 0.781032C11.1646 1.0265 11.5514 1.32404 11.901 1.67364C12.2431 2.02325 12.5407 2.41004 12.7936 2.83403C13.0391 3.25802 13.2287 3.71176 13.3626 4.19526C13.504 4.68619 13.5746 5.192 13.5746 5.71269V12.5746H14.7127Z"}))}}var E,_=i("wirn"),B=i("YJhp"),I=i("HxRh"),R=i("u5KZ"),z=i("dTwT");!function(e){e.breakingNews="breakingNews",e.topStories="topStory",e.dailyBrief="dailyBrief"}(E||(E={}));const A={breakingNewsOn:!1,desktopNotificationsOn:!1,topStoriesNewsOn:!1},M="notifications/history",L="app",H="news",F="locale",$=[E.breakingNews,E.topStories,E.dailyBrief],U="seen",W="unseen",V="NotificationBell",J="Notification Bell",Z="Back To Notifications",q="Settings",Y="dismiss",G="DesktopNotificationsTurnOn",K="On",X="Off",Q={desktopNotificationsOn:!1,breakingNewsOn:!1,topStoriesNewsOn:!1};function ee(){const e=z.a.getItem("NotificationBellSettings");if(!e)return te();try{const t=JSON.parse(e);return Object.assign(Object.assign({},t),{readDate:t.readDate?new Date(t.readDate):void 0})}catch(e){return R.a.sendAppErrorEvent(Object.assign(Object.assign({},I.Wb.JsonParseError),{message:"Error during JSON parse of local storage: "+(e&&e.message)})),te()}}function te(e){const t=e||Q;return z.a.setItem("NotificationBellSettings",JSON.stringify(t)),t}var ie=i("HzrG"),ne=i("AuhI"),se=i("XI4f"),oe=i("3KaK");const ae=e=>({news_item:{display:"flex",position:"relative","flex-direction":"row",padding:Object(y.b)("12px 16px 12px 16px","12px 16px 12px 16px",e.direction),"text-decoration":"none",cursor:"pointer","&:hover":{"& $heading":{"text-decoration":"underline"},"& $image":{opacity:"0.9"}}},news_item_alert:{},read:{},unread:{},timestamp:{flex:"0 0 24px",color:se.a,"text-align":"center"},space:{color:se.a,"text-align":"center",padding:"0px 4px"},content_container:{display:"flex","flex-direction":"column","flex-grow":"1"},image:{"flex-shrink":"0",width:"64px",height:"64px",fill:"white",overflow:"hidden","border-radius":e.cornerRadius+"px",background:ie.b.neutralPalette[oe.b],"margin-left":"12px"},type:{"align-self":"start","white-space":"nowrap",color:se.a},heading:Object.assign(Object.assign({position:"relative","font-style":"normal","font-weight":""+O.fontWeight.normal,"white-space":"nowrap","text-overflow":"ellipsis",color:S.c},Object(ne.a)(2,v.h.t7.lineHeight)),{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2","padding-top":"8px"}),attribution:{color:se.a,display:"inline-block","padding-top":"8px"}});var re=i("I6Lx"),ce=i("OnwC"),le=i("jgQC"),pe=i("vjdx");class de extends ce.a{constructor(){super(...arguments),this.handledProps={managedClasses:void 0,layout:void 0,image:void 0,headline:void 0,providerName:void 0,time:void 0,type:void 0,localizedType:void 0,href:void 0,articleId:void 0,seen:void 0,telemetry:void 0,vertical:void 0}}render(){const{managedClasses:e,seen:t,time:i,layout:n,providerName:s,image:o,type:a,headline:r,href:c,localizedType:l}=this.props,p=Object(pe.a)(i,re.b.Locale,{JustNow:"1m",NumberDayAgo:"{0}d",NumberDaysAgo:"{0}d",NumberHourAgo:"{0}h",NumberHoursAgo:"{0}h",NumberMinuteAgo:"{0}m",NumberMinutesAgo:"{0}m"},1),d=[this.generateClassNames(),e.news_item];return d.push(t?e.read:e.unread),a===E.breakingNews&&d.push(e.news_item_alert),T.a.createElement("a",Object.assign({},this.unhandledProps(),{className:d.join(" "),href:c},this.props.telemetry),T.a.createElement("div",{className:e.content_container},T.a.createElement(g.a,Object.assign({className:e.type},n.type,{"aria-hidden":"true"})," ",l),T.a.createElement(g.a,Object.assign({className:e.heading},n.headline,{"aria-label":r}),r),T.a.createElement("div",null,T.a.createElement(g.a,Object.assign({className:e.attribution},n.attribution,{"aria-hidden":"true"})," ",s," "),T.a.createElement(g.a,Object.assign({className:e.space},n.timestamp),"Â·"),T.a.createElement(g.a,Object.assign({className:e.timestamp},n.timestamp),p))),T.a.createElement(le.default,{src:o.src,className:e.image,alt:o.alt}))}}const ge=Object(n.a)(e=>{const t=ae(e);return Object.assign(Object.assign({},t),{type:Object.assign(Object.assign({},t.type),{"$news_item_alert &":{color:"#DA2E3B"},display:"flex","flex-direction":"row","$unread &::after":{content:"''",background:"#0078D4",width:"6px",height:"6px","border-radius":"4px","align-self":"center",margin:"0px 7px"}}),heading:Object.assign(Object.assign({},t.heading),{"$unread &":{"font-weight":""+O.fontWeight.semibold}})})})(de),he=Object(n.a)(e=>{const t=ae(e);return Object.assign(Object.assign({},t),{heading:Object.assign(Object.assign({},t.heading),{"$news_item_alert &":{"padding-top":"4px"}}),type:Object.assign(Object.assign({},t.type),{"$news_item_alert &":{background:"#DA2E3B",padding:"2px 8px","font-weight":""+O.fontWeight.bold,color:"white","border-radius":e.cornerRadius+"px"}})})})(de),ue=Object(n.a)(e=>{const t=ae(e);return Object.assign(Object.assign({},t),{type:Object.assign(Object.assign({},t.type),{"$news_item_alert &":{color:"#DA2E3B"},display:"flex","flex-direction":"row","$unread &::after":{content:"''",background:"#0078D4",width:"6px",height:"6px","border-radius":"4px","align-self":"center",margin:"0px 7px"}}),heading:Object.assign(Object.assign({},t.heading),{"$unread &":{"font-weight":""+O.fontWeight.semibold}})})})(de);var be,me,fe=i("JnE6"),ve=i("Am8i");!function(e){e.A="A",e.B="B",e.C="C"}(be||(be={})),function(e){e[e.Default=0]="Default",e[e.NoNewStories=1]="NoNewStories",e[e.Error=2]="Error",e[e.Settings=3]="Settings"}(me||(me={}));var Oe=i("LOMp");class Se extends ce.a{constructor(e){super(e),this.handledProps={enableSettings:void 0,layout:void 0,localizedStrings:void 0,managedClasses:void 0,openSettings:void 0,settingsButtonTelemetry:void 0,toggleopenSettings:void 0,trackEventCb:void 0},this.onSettingsClick=e=>{e.target&&this.tryToggleSettingsVisible()},this.tryToggleSettingsVisible=()=>{const{toggleopenSettings:e}=this.props;e(!0)}}render(){return T.a.createElement("div",{className:this.props.managedClasses.header_container,ref:this.divRef},T.a.createElement("div",{className:this.props.managedClasses.header_title_container},T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.notification_title},this.props.layout.notificationsTitleProps),this.props.localizedStrings.notificationsTitle)),this.props.enableSettings?T.a.createElement(Oe.a,Object.assign({onClick:this.onSettingsClick,className:this.props.managedClasses.settings_button},this.props.layout.settingsButtonProps,this.props.settingsButtonTelemetry,{"data-customhandled":!0}),this.props.localizedStrings.settingsButton):null)}}var we=i("odxL");const ye=Object(n.a)(e=>({header_container:{display:"flex","flex-direction":"row",margin:"16px 12px 8px","align-items":"center","justify-content":"space-between"},header_title_container:{display:"flex","flex-direction":"row","align-items":"center"},notification_title:{"font-weight":""+O.fontWeight.semibold,color:S.c,"letter-spacing":"1px",order:"2","padding-left":"4px"},settings_button:{"font-weight":""+O.fontWeight.normal,"font-style":"normal",color:we.d,order:"3"}}))(Se);var Ce,ke=i("4DIY");!function(e){e.desktopNotifications="desktopNotificationsOn",e.breakingNews="breakingNewsOn",e.topStories="topStoriesNewsOn"}(Ce||(Ce={}));const xe={toggle:{display:"flex",order:"2","border-radius":"40px"},toggle_input:{"box-sizing":"border-box !important"}};class je extends ce.a{constructor(e){super(e),this.handledProps={managedClasses:void 0,notificationHeaderTextProps:void 0,settingsTextProps:void 0,localizedStrings:void 0,settingsType:void 0,settingsSave:void 0,data:void 0,trackEventCb:void 0,telemetry:void 0},this.toggleKeyPress=(e,t,i)=>{"Enter"===e.key&&this.onToggle(t,i)},this.onToggle=(e,t)=>{if(this.props.trackEventCb&&t.current&&this.props.trackEventCb(t.current,ve.a.Click,ve.b.Customize,{type:"click_nonnav",target:t.current}),this.props.settingsSave)switch(e){case Ce.desktopNotifications:return void this.props.settingsSave({desktopNotificationsOn:!this.props.settingsType.desktopNotificationsOn});case Ce.breakingNews:return void this.props.settingsSave({breakingNewsOn:!this.props.settingsType.breakingNewsOn});case Ce.topStories:return void this.props.settingsSave({topStoriesNewsOn:!this.props.settingsType.topStoriesNewsOn});default:return}},this.renderToggle=(e,t,i,n,s,o,a,r)=>{const c=this.props.telemetry?this.props.telemetry.addOrUpdateChild({name:o,action:ve.a.Click,behavior:ve.e.Interaction,content:{headline:a}}).render():null,l=T.a.createRef();return T.a.createElement("div",{className:this.props.managedClasses.breakingNews_container},T.a.createElement("div",{className:this.props.managedClasses.content_container},T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.toggle_title},e),t),T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.toggle_description},n),i)),T.a.createElement("div",Object.assign({ref:l},c,{style:{display:"none"}})),T.a.createElement(ke.a,{disabled:r,inputId:s,selectedMessage:this.props.localizedStrings.onToggleText,statusMessageId:"span01",onChange:e=>this.onToggle(s,l),onKeyPress:e=>this.toggleKeyPress(e,s,l),selected:this.props.settingsType[s],unselectedMessage:this.props.localizedStrings.offToggleText,jssStyleSheet:xe}))}}render(){const e=this.props.settingsType.breakingNewsOn?"BreakingNewsOff":"BreakingNewsOn",t=this.props.settingsType.desktopNotificationsOn?"DesktopNotificationsOff":"DesktopNotificationsOn",i=this.props.settingsType.topStoriesNewsOn?"TopStoriesOff":"TopStoriesOn",n=this.props.settingsType.breakingNewsOn?X:K,s=this.props.settingsType.desktopNotificationsOn?X:K,o=this.props.settingsType.topStoriesNewsOn?X:K;let a=this.props.managedClasses.settings_bottom_section;this.props.settingsType.desktopNotificationsOn||(a+=" "+this.props.managedClasses.grayed_out);const r=this.props.settingsType.desktopNotificationsBlocked?this.props.managedClasses.grayed_out:"";return T.a.createElement("div",{className:this.props.managedClasses.settings_container},T.a.createElement("div",{className:r},this.renderToggle(Object.assign({},this.props.settingsTextProps.breakingNewsTitleProps),this.props.localizedStrings.enableDesktopNotificationsToggleHeader,this.props.localizedStrings.enableDesktopNotificationsToggleDescription,Object.assign({},this.props.settingsTextProps.desktopNotificationsDescriptionProps),Ce.desktopNotifications,t,s,this.props.settingsType.desktopNotificationsBlocked),this.props.settingsType.desktopNotificationsBlocked?T.a.createElement("div",{className:this.props.managedClasses.free_label},T.a.createElement(g.a,Object.assign({},this.props.settingsTextProps.desktopNotificationsBlockedProps),this.props.localizedStrings.desktopNotificationsBlocked)):null),T.a.createElement(h.a,{className:this.props.managedClasses.settings_divider}),T.a.createElement("div",{className:a},T.a.createElement("div",{className:this.props.managedClasses.free_label},T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.free_label},this.props.settingsTextProps.notificationTypeSelectionSectionDescriptionProps),this.props.localizedStrings.notificationTypeSelectionSectionDescription)),this.renderToggle(Object.assign({},this.props.settingsTextProps.breakingNewsTitleProps),this.props.localizedStrings.breakingNewsHeader,this.props.localizedStrings.breakingNewsDescription,Object.assign({},this.props.settingsTextProps.breakingNewsDescriptionProps),Ce.breakingNews,e,n,!this.props.settingsType.desktopNotificationsOn),this.renderToggle(Object.assign({},this.props.settingsTextProps.topStoriesTitleProps),this.props.localizedStrings.topStoriesHeader,this.props.localizedStrings.topStoriesDescription,Object.assign({},this.props.settingsTextProps.topStoriesDescriptionProps),Ce.topStories,i,o,!this.props.settingsType.desktopNotificationsOn)))}}const Ne=Object(n.a)(e=>({settings_container:{display:"flex",padding:"16px","flex-direction":"column"},breakingNews_container:{display:"flex","flex-direction":"row",order:"1","justify-content":"space-between","padding-bottom":"16px"},toggle_title:{display:"flex","flex-direction":"row",order:"1","font-weight":""+O.fontWeight.semibold,"font-style":"normal",color:S.c,margin:"0px"},toggle_description:{color:se.a,order:"2","font-weight":""+O.fontWeight.normal,"font-style":"normal",margin:"0px"},content_container:{order:"1",display:"flex","flex-direction":"column"},topStories_container:{display:"flex","flex-direction":"row","justify-content":"space-between",order:"2","padding-top":"16px"},settings_divider:{"&&":{"margin-left":"-16px","margin-right":"-16px"}},settings_bottom_section:{"padding-top":"10px"},grayed_out:{opacity:"0.6"},free_label:{"padding-bottom":"10px"}}))(je);var Te=i("bTI0"),Pe=i("xDbA"),De=i("NS3c"),Ee=i("vT/5");class _e extends ce.a{render(){return T.a.createElement("div",{className:this.generateClassNames(this.props.managedClasses.banner)},T.a.createElement(Ee.a,{size:this.props.messageProps.size,tag:this.props.messageProps.tag},this.props.message),T.a.createElement(Pe.a,Object.assign({onClick:this.props.onClick,appearance:De.a.primary},this.props.buttonTelemetry),T.a.createElement(Ee.a,{size:this.props.buttonTextProps.size,tag:this.props.buttonTextProps.tag},this.props.buttonText)))}}const Be=Object(n.a)(()=>({banner:{display:"flex","justify-content":"space-between",padding:"10px","align-items":"center",color:S.c}}))(_e);var Ie=i("mwRD"),Re=i("DSvr"),ze=i.n(Re),Ae=i("7nmT");class Me extends ce.a{constructor(e){var t;super(e),this.handledProps={content:void 0,design:void 0,dialogStateText:void 0,imageOfTheDayEnabled:void 0,localizedStrings:void 0,managedClasses:void 0,newsItemLayout:void 0,notificationHeaderLayout:void 0,notificationState:void 0,onDataSave:void 0,onNotificationBellDialogRendered:void 0,openLinksInSameTab:void 0,popoverOpen:void 0,promotionalBannerTextProps:void 0,pushConfig:void 0,pushPromotionalBannerClick:void 0,requestContext:void 0,setNewRenderState:void 0,settingsSave:void 0,settingsTextProps:void 0,settingsType:void 0,telemetryObject:void 0,togglePopoverOpen:void 0,trackEventCb:void 0,trackPartialImpressionCb:void 0,useDarkTheme:void 0,zIndexOverride:void 0},this.handleScroll=e=>{this.props.trackPartialImpressionCb&&(R.a.observeElementTree(this.menuRef.current),this.props.trackPartialImpressionCb(e.target,fe.b.Scroll,!0,"scroll",V))},this.onBackClick=e=>{this.props.trackEventCb&&this.props.trackEventCb(e.target,null,null,{type:"click_nonnav",target:e.target});e.target&&this.props.notificationState===me.Settings&&this.props.setNewRenderState(!1)},this.getPopoverLocation=()=>{if(!this.buttonRef.current)return null;const e=Object(Ae.findDOMNode)(this.buttonRef.current),{top:t,left:i,height:n,width:s}=e.getBoundingClientRect(),o=document.dir===y.a.rtl,a=t+n+434>window.innerHeight,r=this.state&&this.state.notificationDialogHeight||434;return{top:(a?t-r:t+n)+window.scrollY,left:o?i+363+window.scrollX:i-363+s+window.scrollX,offset:0}},this.markAsRead=()=>{const{content:e,notificationState:t,popoverOpen:i}=this.props;if(t===me.Error||!i)return;const n=ee(),s=Math.max(...this.props.content.map(e=>e.time.getTime())),o=new Date(s),a=Object.assign(Object.assign({},n),{readDate:o,ids:void 0});this.props.settingsSave(a);const r={content:e.map(e=>Object.assign(Object.assign({},e),{seen:!0}))};this.props.onDataSave(2,r)},this.onNotificationBellClick=e=>{const{popoverOpen:t}=this.props;t?(this.markAsRead(),this.props.trackEventCb&&this.dismissRef&&this.dismissRef.current&&this.props.trackEventCb(this.dismissRef.current,null,null,{type:"click_nonnav",target:this.dismissRef.current},"","dismiss")):this.props.trackEventCb&&this.props.trackEventCb(e.currentTarget,null,null,{type:"click_nonnav",target:e.currentTarget}),this.tryTogglePopoverOpen(!t)},this.renderBadge=e=>{const{content:t,managedClasses:i}=this.props;if(0===e)return null;const{bell_notification_badge:n,bell_notification_badge_plus:s,bell_notification_count:o}=i;return T.a.createElement(l.a,{className:n},T.a.createElement("div",{className:o},e>5?T.a.createElement(_.a,{wrapperClassName:s,glyphType:B.b.NotificationFivePlusSign}):e))},this.generatePopoverElement=()=>{const{notificationState:e}=this.props;let t;this.props.telemetryObject&&(t=this.props.telemetryObject.addOrUpdateChild({name:q,action:ve.a.Click,behavior:ve.b.Navigate}));const i=t.render();switch(e){case me.Settings:{const e=(t?t.addOrUpdateChild({name:Z,behavior:ve.b.Cancel}):null).render();return T.a.createElement("div",Object.assign({className:this.props.managedClasses.dialog_container},i),T.a.createElement("div",{className:this.props.managedClasses.settings_header},T.a.createElement(p.a,Object.assign({onClick:this.onBackClick,glyph:this.generateGlyph,appearance:d.a.lightweight},e,{"data-customhandled":!0,jssStyleSheet:x}),T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.notification_title},this.props.notificationHeaderLayout.notificationsTitleProps),this.props.localizedStrings.notificationsTitle))),T.a.createElement(h.a,null),T.a.createElement(Ne,{notificationHeaderTextProps:this.props.notificationHeaderLayout,settingsTextProps:this.props.settingsTextProps,localizedStrings:this.props.localizedStrings,settingsType:this.props.settingsType,settingsSave:this.props.settingsSave,data:this.props.content,telemetry:t,trackEventCb:this.props.trackEventCb}))}case me.NoNewStories:return T.a.createElement("div",null,T.a.createElement(ye,{toggleopenSettings:this.props.setNewRenderState,layout:this.props.notificationHeaderLayout,settingsButtonTelemetry:i,localizedStrings:this.props.localizedStrings,trackEventCb:this.props.trackEventCb,enableSettings:!!this.props.pushConfig}),T.a.createElement(h.a,null),T.a.createElement("div",{className:this.props.managedClasses.up_to_date_container},T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.up_to_date_upper_text},this.props.dialogStateText.upToDate.headline),this.props.localizedStrings.upToDate),T.a.createElement(g.a,Object.assign({},this.props.dialogStateText.upToDate.description[0]),this.props.localizedStrings.upToDateDescription),this.generatePushPromotionalBanner()));case me.Error:return T.a.createElement("div",{className:this.props.managedClasses.dialog_container},T.a.createElement(ye,{toggleopenSettings:this.props.setNewRenderState,layout:this.props.notificationHeaderLayout,settingsButtonTelemetry:i,localizedStrings:this.props.localizedStrings,trackEventCb:this.props.trackEventCb,enableSettings:!!this.props.pushConfig}),T.a.createElement(h.a,null),T.a.createElement("div",{className:this.props.managedClasses.error_notification_container},T.a.createElement(g.a,Object.assign({className:this.props.managedClasses.error_notification_upper_text},this.props.dialogStateText.errorState.headline),this.props.localizedStrings.error),T.a.createElement(g.a,Object.assign({},this.props.dialogStateText.errorState.description[0]),this.props.localizedStrings.errorDescription)),T.a.createElement("div",{className:this.props.managedClasses.refresh_arrow},T.a.createElement(_.a,{glyphType:B.b.NotificationRefreshArrow})));default:{const e=this.generatePushPromotionalBanner();return T.a.createElement("div",{className:this.props.managedClasses.dialog_container},T.a.createElement(ye,{toggleopenSettings:this.props.setNewRenderState,layout:this.props.notificationHeaderLayout,settingsButtonTelemetry:i,localizedStrings:this.props.localizedStrings,trackEventCb:this.props.trackEventCb,enableSettings:!!this.props.pushConfig}),T.a.createElement("div",{className:this.props.managedClasses.content_container},T.a.createElement("div",{className:this.props.managedClasses.news_container,style:e?{}:{marginBottom:"4px"}},this.renderContent()),e))}}},this.generatePushPromotionalBanner=()=>{if(!this.props.pushConfig||this.props.settingsType.desktopNotificationsOn||this.props.settingsType.desktopNotificationsBlocked)return null;let e;if(this.props.telemetryObject){const t={name:G,behavior:ve.b.Navigate};e=this.props.telemetryObject?this.props.telemetryObject.addOrUpdateChild(t).render():null}return T.a.createElement(T.a.Fragment,null,T.a.createElement(h.a,null),T.a.createElement(Be,{buttonText:this.props.localizedStrings.pushPromotionalBannerButtonText,buttonTextProps:this.props.promotionalBannerTextProps.buttonTextProps,message:this.props.localizedStrings.pushPromotionalBannerMessage,messageProps:this.props.promotionalBannerTextProps.messageProps,onClick:this.props.pushPromotionalBannerClick,buttonTelemetry:e}))},this.generateGlyph=()=>T.a.createElement(j.a,{className:this.props.managedClasses.glyph}),this.handleUnfocus=e=>{!e.target||(e=>!this.containerRef.current||this.containerRef.current.contains(e))(e.target)||(e=>!this.menuRef.current||this.menuRef.current.parentNode.contains(e))(e.target)||(this.props.trackEventCb&&this.dismissRef&&this.dismissRef.current&&this.props.trackEventCb(this.dismissRef.current,null,null,{type:"click_nonnav",target:this.dismissRef.current},"","dismiss"),this.props.popoverOpen&&this.markAsRead(),this.closeMenu())},this.closeMenu=()=>{this.tryTogglePopoverOpen(!this.props.popoverOpen)},this.renderContent=()=>{const{content:e,design:t,localizedStrings:i,managedClasses:n}=this.props;switch(t){case be.B:{const t=e.filter(({seen:e})=>!e),s=t.length>0,o=e.filter(({seen:e})=>e),a=o.length>0;return T.a.createElement(T.a.Fragment,null,s&&T.a.createElement("div",{className:n.seperator},i.new),t.map(this.newsItemPropsToCard),s&&a&&T.a.createElement("div",{className:n.seperator},i.earlier),o.map(this.newsItemPropsToCard))}case be.C:case be.A:default:return e.map(this.newsItemPropsToCard)}},this.handleDocumentScroll=()=>{this.props.popoverOpen&&(this.markAsRead(),this.closeMenu())},this.tryTogglePopoverOpen=e=>{const{togglePopoverOpen:t}=this.props;t&&(this.opening=!0===e,t(e))},this.newsItemPropsToCard=(e,t)=>{const{localizedStrings:i,design:n,managedClasses:s,openLinksInSameTab:o}=this.props,a=this.props.telemetryObject?this.props.telemetryObject.addOrUpdateChild({name:e.seen?U:W,type:ve.e.Headline}):null,r=a?a.addOrUpdateChild({name:e.type,type:ve.e.Headline,content:{vertical:e.vertical}}):null,c=a.render(),l=r.render();let p;switch(n){case be.C:p=ue;break;case be.B:p=he;break;case be.A:default:p=ge}return T.a.createElement("div",Object.assign({},c,{key:t,className:s.inner_content_container}),T.a.createElement(p,Object.assign({},e,{localizedType:i[e.type],articleId:e.articleId,layout:this.props.newsItemLayout,telemetry:l},o?null:{target:"_blank"})))},this.containerRef=T.a.createRef(),this.menuRef=T.a.createRef(),this.buttonRef=T.a.createRef(),this.dismissRef=T.a.createRef(),this.opening=!1,this.popOverStyle=(t=e.zIndexOverride,{popOver:{"border-radius":"2px","box-shadow":"0px 0px 9.2px rgba(0, 0, 0, 0.11), 0px 12.8px 28.8px rgba(0, 0, 0, 0.13)",background:m.c,width:"363px","z-index":t?""+t:""+(w.a.Flyout+1),"& *":{"box-sizing":"content-box"}}});const i={name:V,content:{headline:J},action:ve.a.Click,behavior:ve.b.Open,destinationUrl:""},n={name:V,content:{headline:Y},action:ve.a.Click,behavior:ve.b.Close,destinationUrl:""};this.props.telemetryObject&&(this.buttonTelemetry=this.props.telemetryObject.addOrUpdateChild(i,this.buttonTelemetry),this.dismissTelemetry=this.props.telemetryObject.addOrUpdateChild(n,this.dismissTelemetry))}render(){const e=this.props.content.reduce((e,t)=>t.seen?e:e+1,0),t=this.props.localizedStrings.unreadNotification,i=this.renderBadge(e);return T.a.createElement("div",Object.assign({className:this.props.managedClasses.bell_container,ref:this.containerRef,onScroll:this.handleScroll},this.props.telemetryObject.render()),T.a.createElement("div",Object.assign({ref:this.dismissRef},this.dismissTelemetry.render(),{style:{display:"none"}})),T.a.createElement(Ie.a,Object.assign({"data-customhandled":!0,"aria-label":t?t.replace("{0}",e.toString()):this.props.localizedStrings.notificationsTitle,onClick:this.onNotificationBellClick,className:this.generateButtonClasses()},this.buttonTelemetry.render(),{ref:this.buttonRef,jssStyleSheet:{button_contentRegion:{"& svg":{width:"20px",height:"20px"}}}}),T.a.createElement(D,null),i),this.renderPopover())}componentDidMount(){document.addEventListener("mousedown",this.handleUnfocus,!1),document.addEventListener("keydown",this.handleUnfocus,!1),document.addEventListener("scroll",this.handleDocumentScroll,!1),this.props.onNotificationBellDialogRendered&&this.props.onNotificationBellDialogRendered()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleUnfocus,!1),document.removeEventListener("keydown",this.handleUnfocus,!1)}componentDidUpdate(){this.opening&&(this.opening=!1,this.props.trackPartialImpressionCb&&this.props.trackPartialImpressionCb(this.containerRef.current,fe.b.View,!1,"view",V),this.menuRef.current&&this.setState({notificationDialogHeight:this.menuRef.current.offsetHeight}))}renderPopover(){const{popoverOpen:e}=this.props,t=this.getPopoverLocation(),i=e&&!!t,n=(()=>{if(this.containerRef&&this.containerRef.current){const e=ze()(this.containerRef.current);if(e.length>0)return e[0]}return null})();if(i)return T.a.createElement(u.a,null,T.a.createElement(Te.a,Object.assign({},t,{jssStyleSheet:this.popOverStyle,enable:i,autoFocus:!0,staticPosition:!1,autoFlipX:!0,anchor:n,onDismiss:this.closeMenu,requestContext:this.props.requestContext}),T.a.createElement("div",Object.assign({ref:this.menuRef,"aria-modal":!0,role:"dialog"},this.props.telemetryObject.render()),this.generatePopoverElement())))}generateButtonClasses(){return`${this.props.managedClasses.bell_button} ${this.props.imageOfTheDayEnabled&&this.props.useDarkTheme?this.props.managedClasses.bell_button_light:""}`}}const Le=Object(n.a)(e=>({content_container:{display:"flex","flex-direction":"column","max-height":"393px"},dialog_container:{position:"relative",width:"363px",display:"flex","flex-direction":"column","box-shadow":"0px 0px 9.2px rgba(0, 0, 0, 0.11), 0px 12.8px 28.8px rgba(0, 0, 0, 0.13)"},news_container:{"overflow-y":"auto","overflow-x":"hidden","overscroll-behavior":"none","&::-webkit-scrollbar":{width:"10px",background:m.a},"&::-webkit-scrollbar-track":{"border-radius":"10px",background:k,"margin-bottom":"10px","margin-top":"4px",[Object(y.b)("padding-right","padding-left",e.direction)]:"2px"},"&::-webkit-scrollbar-thumb":{"border-radius":"10px",background:C,border:"none"},"-ms-scrollbar-face-color":C,"-ms-scrollbar-track-color":k,"-ms-scroll-chaining":"none","-ms-overflow-style":"scrollbar","scrollbar-width":"thin"},bell_container:{position:"relative"},bell_button:{float:Object(y.b)("right","left",e.direction),cursor:"pointer",height:"32px",opacity:"0.8",padding:"0px",width:"32px",display:"flex",position:"relative","justify-content":"center","align-items":"center","&&":{background:"none",overflow:"visible"}},bell_button_light:{"&&":{fill:"#fff",transition:"none","&:active:enabled":{background:f.a},"&:hover:enabled":{background:f.b}}},bell_notification_badge:Object.assign(Object.assign({height:"16px",width:"16px","border-radius":"9999px",background:"#F03442",position:"absolute",top:"-5px",[Object(y.b)("right","left",e.direction)]:"-5px",display:"flex","justify-content":"center","align-items":"center"},Object(v.c)("t9")),{color:"#FFFFFF","&&":{padding:"0"}}),bell_notification_count:{display:"flex","justify-content":"center","align-items":"center",height:"16px","font-weight":""+O.fontWeight.bold},settings_header:{display:"flex",width:"363px",padding:"8px 6px 8px"},notificationBell_popover:{"overflow-y":"auto"},up_to_date_container:{margin:"24px 40px 32px 40px","text-align":"center"},up_to_date_upper_text:{"font-weight":"300","padding-bottom":"12px"},error_notification_container:{margin:"48px 40px","max-height":""},error_notification_upper_text:{"font-weight":"300","padding-bottom":"48px"},refresh_arrow:{"text-align":Object(y.b)("right","left",e.direction),[Object(y.b)("margin-right","margin-left",e.direction)]:"32px","margin-bottom":"48px"},notification_title:{"font-weight":""+O.fontWeight.semibold,"letter-spacing":"1px",color:S.c},glyph:{fill:S.c,height:"12px",width:"12px",[Object(y.b)("padding-right","padding-left",e.direction)]:"10px"},bell_notification_badge_plus:{width:"inherit",height:"inherit"},seperator:Object.assign({background:m.e,"text-transform":"uppercase",padding:"4px 16px","font-weight":""+O.fontWeight.semibold},Object(v.c)("t8")),inner_content_container:{padding:"2px 0px"}}))(Me);class He extends a.a{constructor(e){super(e),this.handledProps=Object.assign(Object.assign({},a.b),{articleIds:void 0,data:void 0,design:void 0,dialogStateText:void 0,imageOfTheDayEnabled:void 0,loadState:void 0,localizedStrings:void 0,managedClasses:void 0,newsItemLayout:void 0,notificationHeaderLayout:void 0,notificationState:void 0,onDataSave:void 0,onNotificationBellDialogRendered:void 0,openLinksInSameTab:void 0,pushPromotionalBannerClick:void 0,dialogZIndex:void 0,telemetryObject:void 0,onPopoverVisibleChange:void 0,onVisibleStateChange:void 0,popoverVisible:void 0,promotionalBannerTextProps:void 0,pushConfig:void 0,settingsSave:void 0,settingsTextProps:void 0,settingsType:void 0,trackEventCb:void 0,trackPartialImpressionCb:void 0,useDarkTheme:void 0}),this.onColumnBreakpoint=e=>{this.setState({column:e})},this.state={column:Object(r.a)().currentColumnArrangement}}componentDidMount(){Object(r.a)().subscribe(this.onColumnBreakpoint)}componentWillUnmount(){Object(r.a)().unsubscribe(this.onColumnBreakpoint)}render(){switch(this.props.loadState){case 2:{const e=this.props.data;return this.state.column===c.a.c1?null:T.a.createElement("div",Object.assign({className:this.generateClassNames()},this.unhandledProps()),T.a.createElement(Le,{content:e?e.content:[],design:this.props.design,dialogStateText:this.props.dialogStateText,imageOfTheDayEnabled:this.props.imageOfTheDayEnabled,localizedStrings:this.props.localizedStrings,newsItemLayout:this.props.newsItemLayout,notificationHeaderLayout:this.props.notificationHeaderLayout,notificationState:this.props.notificationState,onDataSave:this.props.onDataSave,onNotificationBellDialogRendered:this.props.onNotificationBellDialogRendered,openLinksInSameTab:this.props.openLinksInSameTab,popoverOpen:this.props.popoverVisible,promotionalBannerTextProps:this.props.promotionalBannerTextProps,pushConfig:this.props.pushConfig,pushPromotionalBannerClick:this.props.pushPromotionalBannerClick,requestContext:this.props.requestContext,setNewRenderState:this.props.onVisibleStateChange,settingsSave:this.props.settingsSave,settingsTextProps:this.props.settingsTextProps,settingsType:this.props.settingsType,telemetryObject:this.props.telemetryObject,togglePopoverOpen:this.props.onPopoverVisibleChange,trackEventCb:this.props.trackEventCb,trackPartialImpressionCb:this.props.trackPartialImpressionCb,useDarkTheme:this.props.useDarkTheme,zIndexOverride:this.props.dialogZIndex}))}default:case 1:return null}}}He.defaultProps={experienceName:"NotificationBell"};var Fe,$e=i("z09o"),Ue=i("D57K"),We=i("uw8u"),Ve=i("WfnD"),Je=i("s9+9");!function(e){e.inspect=function(e){return{props:{articleIds:e.state.articleIds,data:e.state.data,design:e.config.design,dialogStateText:e.config.dialogText,dialogZIndex:e.config.dialogZIndex,imageOfTheDayEnabled:e.state.imageOfTheDayEnabled,loadState:e.state.loadState,localizedStrings:e.config.localizedStrings,newsItemLayout:e.config.newsItemLayout,notificationHeaderLayout:e.config.notificationHeaderLayout,notificationState:e.state.renderState,onDataSave:e.connectorArgs.onDataSave,onNotificationBellDialogRendered:e.connectorArgs.onNotificationBellDialogRendered,openLinksInSameTab:e.config.openLinksInSameTab,onPopoverVisibleChange:e.connectorArgs.onPopoverVisibleChange,onVisibleStateChange:e.connectorArgs.onVisibleStateChange,popoverVisible:e.state.popoverVisible,promotionalBannerTextProps:e.config.promotionalBannerProps,pushConfig:e.connectorArgs.pushConfig,pushPromotionalBannerClick:e.connectorArgs.pushPromotionalBannerClick,requestContext:e.connectorArgs.requestContext,settingsSave:e.connectorArgs.settingsSave,settingsTextProps:e.config.settingsTextProps,settingsType:e.state.settingsType,useDarkTheme:e.state.BingImageData&&e.state.BingImageData.isEnabled&&e.state.BingImageData.isExpanded&&!e.state.BingImageData.isHeaderSticky},missingChildren:[]}}}(Fe||(Fe={}));var Ze=i("9J8d"),qe=i("pbks"),Ye=i("6xGu"),Ge=i("rvYQ"),Ke=i("msIb");function Xe(){return Object(Ue.b)(this,void 0,void 0,(function*(){const e=new URL(`${M}${Ge.a.ServiceUrlBase.search}`,Ge.a.ServiceUrlBase),t=Ke.a.getOneServiceOCID(Ge.a.TrackInfo,"Peregrine");Ke.a.getCommonParams(t).forEach(t=>{e.searchParams.append(t.key,t.value)}),e.searchParams.append(L,H),e.searchParams.append(F,re.b.Locale);const i=ee(),n=yield fetch(e.href);if(!n.ok)throw Error(n.statusText);const s=(yield n.json()).value[0],o=new Date;o.setDate(o.getDate()-1);const a=[];for(const e of Object.entries(s)){const t=e[0],i=Object.entries(e[1]);if($.find(e=>e===t))for(const e of i){const i=new Date(e[0]);if(i>o){const n=e[1];a.push({time:i,articleId:n,storyType:t})}}}const r=function(e){const t=e.sort((e,t)=>t.time.getTime()-e.time.getTime()),i=new Set;return t.filter(e=>!i.has(e.articleId)&&(i.add(e.articleId),!0))}(a).map(e=>function(e,t){return Object(Ue.b)(this,void 0,void 0,(function*(){const{articleId:i,time:n,storyType:s}=e,o=yield Object(qe.a)({id:i});if(!o)return R.a.sendAppErrorEvent(Object.assign(Object.assign({},I.Wb.NewsItemDataFetchError),{message:"Error fetching content preview data. Refer to ContentPreviewAppErrors (804x)",pb:Object.assign(Object.assign({},I.Wb.DataFetchError.pb),{customMessage:"article ID: "+i})})),null;try{const a=o.title,r=o.provider.name,c=s,l=function(e,t){return t.readDate?t.readDate>=e.time:!!(t.ids&&t.ids.length>0)&&!!t.ids.find(t=>t===e.articleId)}(e,t),p=Object(Ye.f)(o,Qe),d=o.category.product;if(!p)return R.a.sendAppErrorEvent(Object.assign(Object.assign({},I.Wb.MalformedNewsItemResponseError),{message:"Unable to map image for news item data. Content Preview response may have no image. Refer to PB",pb:Object.assign(Object.assign({},I.Wb.DataFetchError.pb),{customMessage:`article ID: ${i}. Image field in response: ${JSON.stringify(o.images)}`})})),null;const{market:g,language:h}=Ge.a.CurrentRequestTargetScope.locale,u=`${h}-${g}`;return{articleId:i,image:p,headline:a,providerName:r,type:c,href:Object(Ye.c)(o,u,o.category.product,o.category.label),time:n,seen:l,vertical:d}}catch(e){return R.a.sendAppErrorEvent(Object.assign(Object.assign({},I.Wb.MalformedNewsItemResponseError),{message:"Malformed content preview returned. Error: "+e,pb:Object.assign(Object.assign({},I.Wb.DataFetchError.pb),{customMessage:"article ID: "+i})})),null}}))}(e,i));return{content:(yield Promise.all(r)).filter(e=>!!e)}}))}const Qe={width:64,height:64};var et=i("A8DD");class tt extends Ve.a{constructor(){super(...arguments),this.setTrackingFunctions=(e,t)=>{this.trackEventCb=e,this.trackPartialImpressionCb=t},this.notificationBellDialogRenderedCallback=()=>{this.config.resetNotificationCountAfterLoad&&this.updateNotificationBellReadDate()},this.updateNotificationBellReadDate=()=>{if(z.a){const e=(new Date).toISOString(),t=JSON.parse(z.a.getItem("NotificationBellSettings")||null)||{};t.readDate=e,z.a.setItem("NotificationBellSettings",JSON.stringify(t))}},this.onPopoverVisibleChange=e=>o.popoverVisible.getActionSender(this).send(e),this.updatePushSubscriptions=e=>Object(Ue.b)(this,void 0,void 0,(function*(){We.a.getInstance()&&(yield We.a.getInstance().resolvePushNotificationsSubscription(this.config.pushConfig.notificationEndpoint,this.config.pushConfig.welcomeTitle,this.config.pushConfig.welcomeMessage,this.config.pushConfig.welcomeLink,this.config.pushConfig.welcomeIcon,e,this.telemetryObject))})),this.settingsSave=e=>Object(Ue.b)(this,void 0,void 0,(function*(){const t=this.getCurrentState().settingsType,i=Object.assign(Object.assign({},this.getCurrentState().settingsType),e);if(i.desktopNotificationsOn)if(t.desktopNotificationsOn!==i.desktopNotificationsOn){if(yield this.updatePushSubscriptions(new Set(Object.values(We.b))),i.desktopNotificationsOn="granted"===Notification.permission,!i.desktopNotificationsOn)return void("denied"===Notification.permission&&o.desktopNotificationsBlocked.getActionSender(this).send(!0));i.breakingNewsOn=!0,i.topStoriesNewsOn=!0}else if(i.breakingNewsOn||i.topStoriesNewsOn){const e=new Set;i.breakingNewsOn&&e.add(We.b.breakingNews),i.topStoriesNewsOn&&e.add(We.b.topStories),this.updatePushSubscriptions(e)}else this.updatePushSubscriptions(new Set),i.desktopNotificationsOn=!1;else this.updatePushSubscriptions(new Set),i.breakingNewsOn=!1,i.topStoriesNewsOn=!1;const n=te(i);o.settingsSave.getActionSender(this).send(n)})),this.onDataSave=(e,t)=>o.SetData.getActionSender(this).send(e,t),this.onPushPromotionalBannerButtonClick=()=>{this.settingsSave({desktopNotificationsOn:!0}),o.setRenderState.getActionSender(this).send(me.Settings)},this.onVisibleStateChange=e=>{if(e)return void o.setRenderState.getActionSender(this).send(me.Settings);const t=this.getCurrentState();let i=me.Default;t.data?0===t.data.content.length&&(i=me.NoNewStories):i=me.Error,o.setRenderState.getActionSender(this).send(i)}}mapStateToProps(e){const t={config:this.config,children:this.childComponentInstanceList,state:e,connectorArgs:{onPopoverVisibleChange:this.onPopoverVisibleChange,onVisibleStateChange:this.onVisibleStateChange,pushPromotionalBannerClick:this.onPushPromotionalBannerButtonClick,settingsSave:this.settingsSave,onDataSave:this.onDataSave,onNotificationBellDialogRendered:this.notificationBellDialogRenderedCallback,pushConfig:We.a.getInstance()&&this.config.pushConfig,requestContext:this.requestContext}},i=Object.assign(Object.assign({},Fe.inspect(t)),this.telemetryTags);return i.props.telemetryObject=this.telemetryObject,i.props.trackEventCb=this.trackEventCb,i.props.trackPartialImpressionCb=this.trackPartialImpressionCb,i.props}onComponentConnect(e){return Object(Ue.b)(this,void 0,void 0,(function*(){Ve.a.prototype.onComponentConnect.call(this,e),this.trackEventCb=this.trackEventCb?this.trackEventCb:R.a.sendActionEvent.bind(R.a),this.trackPartialImpressionCb=this.trackPartialImpressionCb?this.trackPartialImpressionCb:R.a.sendContentViewEvent.bind(R.a),"denied"===Notification.permission&&o.desktopNotificationsBlocked.getActionSender(this).send(!0);const t=ee();if("granted"!==Notification.permission)t.desktopNotificationsOn=!1,t.breakingNewsOn=!1,t.topStoriesNewsOn=!1;else if("granted"===Notification.permission){const e=new Set;t.breakingNewsOn&&e.add(We.b.breakingNews),t.topStoriesNewsOn&&e.add(We.b.topStories),this.updatePushSubscriptions(e)}o.settingsSave.getActionSender(this).send(t),this.fetchData().then(()=>{this.onVisibleStateChange(!1)});const i=Ze.a.getInstance().rootReducer.connector(Je.a.MsNewsPageSettings);if(i){const e=i.getCurrentState();e&&e.imageOfTheDay&&o.switchImageOfTheDay.getActionSender(this).send(e.imageOfTheDay)}}))}get injectedDataConnectors(){return[Je.a.BingImageData]}fetchData(){return Object(Ue.b)(this,void 0,void 0,(function*(){o.SetData.getActionSender(this).send(1);try{yield Promise.all([Object(et.a)(),this.requestPageVisibleAsync()]);const e=yield Xe();o.SetData.getActionSender(this).send(2,e)}catch(e){o.SetData.getActionSender(this).send(2),R.a.sendAppErrorEvent(Object.assign(Object.assign({},I.Wb.DataFetchError),{message:"Error fetching data: "+e}))}}))}}var it=i("05Au");class nt{reduce(e,t){if(!e){const e=A;return{popoverVisible:!1,settingsType:{breakingNewsOn:e.breakingNewsOn,topStoriesNewsOn:e.topStoriesNewsOn,desktopNotificationsOn:e.desktopNotificationsOn,desktopNotificationsBlocked:!1},loadState:0,imageOfTheDayEnabled:!1}}if(!t)return e;let i,n=!1;return n=n||it.a.handleAction(t,o.desktopNotificationsBlocked,t=>{i=Object.assign(Object.assign({},e),{settingsType:Object.assign(Object.assign({},e.settingsType),{desktopNotificationsBlocked:t})})}),n=n||it.a.handleAction(t,o.SetData,(t,n)=>{i=Object.assign(Object.assign({},e),{data:n,loadState:t})}),n=n||it.a.handleAction(t,o.popoverVisible,t=>{i=Object.assign(Object.assign({},e),{popoverVisible:t})}),n=n||it.a.handleAction(t,o.setRenderState,t=>{i=Object.assign(Object.assign({},e),{renderState:t})}),n=n||it.a.handleAction(t,o.settingsSave,t=>{const{desktopNotificationsBlocked:n}=e.settingsType;i=Object.assign(Object.assign({},e),{settingsType:{desktopNotificationsBlocked:n,breakingNewsOn:!n&&t.breakingNewsOn,desktopNotificationsOn:!n&&t.desktopNotificationsOn,topStoriesNewsOn:!n&&t.topStoriesNewsOn},readDate:t.readDate,articleIds:t.ids?t.ids:void 0})}),n=n||it.a.handleAction(t,o.switchImageOfTheDay,t=>{i=Object.assign(Object.assign({},e),{imageOfTheDayEnabled:t||!e.imageOfTheDayEnabled})}),i||e}}var st=i("y2Il");const ot={design:be.C,localizedStrings:{onToggleText:"On",offToggleText:"Off",topStory:"Top Stories",breakingNews:"Breaking News",dailyBrief:"Daily Brief",settingsButton:"Settings",notificationsTitle:"Notifications",upToDate:"You're up to date!",upToDateDescription:"Youâve seen all recent notifications. Check back later for more articles.",error:"We can't seem to find Notifications",errorDescription:"Try refreshing the page or check back later for more articles.",saveButtonText:"Save",cancelButtonText:"Cancel",breakingNewsHeader:"Breaking News",breakingNewsDescription:"Show major news events",desktopNotificationsBlocked:"To turn this on, you may need to update your browser's notification settings",enableDesktopNotificationsToggleHeader:"Desktop notification",enableDesktopNotificationsToggleDescription:"Show push notifications on your desktop",notificationTypeSelectionSectionDescription:"Choose the news alerts you'd like to get",topStoriesHeader:"Top Stories",topStoriesDescription:"Show general news headlines and interesting reads",earlier:"earlier",new:"new",pushPromotionalBannerMessage:"Get news alerts on your desktop",pushPromotionalBannerButtonText:"Notify Me",unreadNotification:"{0} unread notifications"},pushConfig:{notificationEndpoint:"https://apxnotify-eastus-daily.cloudapp.net",welcomeIcon:"https://www.msn.com/web-notification-icon-light.png",welcomeLink:"https://wwww.microsoftnews.com",welcomeMessage:"You are now signed up to receive notifications from Microsoft News",welcomeTitle:"Welcome!"},promotionalBannerProps:{buttonTextProps:{size:st.a._6,tag:st.b.span},messageProps:{size:st.a._6,tag:st.b.span}},settingsTextProps:{cancelButtonProps:{size:st.a._8,tag:st.b.span},desktopNotificationsDescriptionProps:{size:st.a._8,tag:st.b.span},desktopNotificationsBlockedProps:{size:st.a._8,tag:st.b.span},desktopNotificationsTitleProps:{size:st.a._7,tag:st.b.span},breakingNewsTitleProps:{size:st.a._7,tag:st.b.span},breakingNewsDescriptionProps:{size:st.a._8,tag:st.b.span},notificationTypeSelectionSectionDescriptionProps:{size:st.a._8,tag:st.b.span},topStoriesTitleProps:{size:st.a._7,tag:st.b.span},topStoriesDescriptionProps:{size:st.a._8,tag:st.b.span}},notificationHeaderLayout:{settingsButtonProps:{size:st.a._8,tag:st.b.span},notificationsTitleProps:{size:st.a._6,tag:st.b.span}},newsItemLayout:{type:{size:st.a._8,tag:st.b.span},headline:{size:st.a._7,tag:st.b.span},attribution:{size:st.a._8,tag:st.b.span},timestamp:{size:st.a._8,tag:st.b.span}},dialogText:{upToDate:{headline:{size:st.a._4,tag:st.b.p},description:{size:st.a._7,tag:st.b.p}},errorState:{headline:{size:st.a._4,tag:st.b.p},description:{size:st.a._7,tag:st.b.p}}},openLinksInSameTab:!1},at=(Object.assign(Object.assign({},ot),{dialogZIndex:300002}),[{key:"Notificaton Bell state",value:{popoverVisible:!1,settingsType:{breakingNewsOn:!0,topStoriesNewsOn:!0,desktopNotificationsOn:!0,desktopNotificationsBlocked:!1},loadState:2,articleIds:[],renderState:me.Default}}]),rt=Object(n.a)({notification_dialog_container:{position:"absolute",width:"300px",height:"118px"}})(He),ct={reactComponent:rt,experienceConfigSchema:$e.NotificationBellConfigSchemaBuilder?$e.NotificationBellConfigSchemaBuilder.schema():void 0,mockConfig:ot,mockState:at,inspector:Fe.inspect,mockConnectorArgs:{onPopoverVisibleChange:null,onVisibleStateChange:null,settingsSave:null,onDataSave:null}}},bTI0:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("Gy7L"),s=i("qGiF"),o=i("qibw"),a=i("OnwC"),r=i("1I/+"),c=i("ERkP"),l=i.n(c),p=i("7nmT"),d=i.n(p),g=i("DSvr"),h=i.n(g);class u extends a.a{constructor(e){super(e),this.handledProps={anchor:void 0,autoFlipX:void 0,autoFocus:void 0,children:void 0,enable:void 0,left:void 0,managedClasses:void 0,offset:void 0,onDismiss:void 0,requestContext:void 0,staticPosition:void 0,top:void 0,zIndex:void 0},this.keyDownHandler=e=>{const{onDismiss:t=(()=>null),anchor:i}=this.props;e.keyCode===n.h?(i&&i.focus(),t(e)):this.tabEventHandler(e,t,i)},this.tabEventHandler=(e,t,i)=>{if(e.keyCode===n.m&&i&&this.popOverRef.current.contains(document.activeElement)){const n=h()(this.popOverRef.current);e.shiftKey&&e.target===n[0]?(i.focus(),t(e),e.preventDefault()):e.shiftKey||e.target!==n[n.length-1]||(i.focus(),t(e))}},this.determinePosition=()=>{const{anchor:e}=this.props;if(e){const{top:t,left:i,width:n}=e.getBoundingClientRect();return{top:t+window.scrollY,left:i+window.scrollX,offset:n}}return{top:window.scrollY,left:window.scrollX,offset:0}},this.popOverRef=l.a.createRef(),this.state={width:0,height:0}}componentDidMount(){if(this.popOverRef&&this.popOverRef.current){const{width:e,height:t}=this.popOverRef.current.getBoundingClientRect();this.setState({width:e,height:t})}else!this.props.enable&&this.state.width&&this.state.height&&this.setState({width:0,height:0})}componentDidUpdate(){if(this.popOverRef&&this.popOverRef.current){!this.props.autoFocus||document.activeElement&&this.popOverRef.current.contains(document.activeElement)||this.popOverRef.current.focus();const{width:e,height:t}=this.popOverRef.current.getBoundingClientRect();e===this.state.width&&t===this.state.height||this.setState({width:e,height:t})}else!this.props.enable&&this.state.width&&this.state.height&&this.setState({width:0,height:0})}render(){const{enable:e,managedClasses:t,staticPosition:i,zIndex:n}=this.props;if(!e)return null;let o=null;const a=null!=n?{zIndex:n}:{};return o=this.popOverRef&&this.popOverRef.current?l.a.createElement(s.a,null,({direction:e})=>l.a.createElement("div",Object.assign({},this.unhandledProps(),{onKeyDown:this.keyDownHandler,tabIndex:0,ref:this.popOverRef,className:t.popOver,style:Object.assign(Object.assign({},this.getPlacementStyle(e)),a)}),this.props.children)):l.a.createElement("div",Object.assign({},this.unhandledProps(),{tabIndex:0,ref:this.popOverRef,style:a,className:t.popOverPlaceholder}),this.props.children),i?o:d.a.createPortal(o,document.body)}getPlacementStyle(e){let{left:t,top:i,offset:n,anchor:s}=this.props;const{autoFlipX:a}=this.props;if(s&&void 0===t&&void 0===i){const e=this.determinePosition();t=e.left,i=e.top,n=e.offset}const{width:c,height:l}=this.state,p=Object(r.b)(this.props.requestContext.data.innerWidth,"innerWidth"),d=window.document&&window.document.documentElement&&window.document.documentElement.offsetHeight;d&&i+l>d&&(i=d-l-n);const g={top:i,right:p-t},h={top:i,left:t+n},[u,b]=e===o.a.rtl?[g,h]:[h,g],m=(u.left||u.right)+c<p,f=(b.left||b.right)+c<p;return a&&!m&&f?b:u}}var b=u,m=i("+viU");const f={popOver:{"animation-duration":"0.367s","animation-fill-mode":"both","animation-name":"fadeIn, slideIn","animation-timing-function":"cubic-bezier(0.1, 0.9, 0.2, 1)",position:"absolute","z-index":""+i("0fst").a.Flyout,"&:focus":{outline:"none"}},popOverPlaceholder:{left:"50%",top:"50%",position:"absolute",visibility:"hidden"},"@keyframes fadeIn":{from:{opacity:0},to:{opacity:1}},"@keyframes slideIn":{from:{transform:"translate3d(0px, -10px, 0px)"},to:{transform:"translate3d(0px, 0px, 0px)"}}},v=Object(m.a)(f)(b)},fi3J:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.presentation="presentation",e.separator="separator"}(n||(n={}))},kpPY:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return o}));i("nwjK");function n(e,...t){return e.replace(/{(\d+)}/g,(function(e,i){if(i>=t.length)return e;const n=t[i];return"number"==typeof n||n?n:""}))}function s(e,t,i=0){return!(!e||!t)&&e.substr(i,t.length)===t}function o(e){return!e||!e.trim()}},pbks:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("D57K"),s=i("HxRh"),o=i("tMmC"),a=i("4HvF"),r=i("zfSW"),c=i("rvYQ"),l=i("u5KZ");function p(e,t=!1,i=1e3){return Object(n.b)(this,void 0,void 0,(function*(){let l;const{id:p,metadata:h}=e,{locale:u,variation:b}=h||{};if(p)return a.c&&(l=function(e){const t=a.a.get(e);if(!t||!t.payload)return;return o.a.log(`Returning content preview item from IndexedDB cache - [${e}]`),t.payload}(p),l)||t&&(l=yield function(e,t){return Object(n.b)(this,void 0,void 0,(function*(){const i=yield Object(r.a)({id:e},t);if(i&&i.fetched&&i.payload)return o.a.log(`Returning content preview item from web worker response - [${e}]`),i.payload}))}(p,i),l)?l:function(e,t,i){return Object(n.b)(this,void 0,void 0,(function*(){let n,a;try{if(t&&i){const s=c.a.ContentServiceUrlBase.search?c.a.ContentServiceUrlBase.search+"&market="+i:"?market="+i;n=new URL(`view/v1/Preview/${e}${t}${s}`,c.a.ContentServiceUrlBase).toString()}else n=new URL(`view/v1/Preview/${e}${c.a.ContentServiceUrlBase.search}`,c.a.ContentServiceUrlBase).toString();if(a=yield fetch(n),o.a.log("ContentPreview content fetched"),!a||!a.ok)return void g(Object.assign(Object.assign({},s.W.InvalidResponseFromContentPreviewFetch),{message:"Invalid response from ContentPreview fetch",pb:Object.assign(Object.assign({},s.W.InvalidResponseFromContentPreviewFetch.pb),{customMessage:`Invalid response from ContentPreview fetch for ${n}. ${d(a)}.`})}));const r=yield a.json();return r||void g(Object.assign(Object.assign({},s.W.InvalidResponseFromContentPreviewResponseJson),{message:"Invalid response from ContentPreview response.json()",pb:Object.assign(Object.assign({},s.W.InvalidResponseFromContentPreviewResponseJson.pb),{customMessage:`Invalid response from ContentPreview for: ${n}.`})}))}catch(e){g(Object.assign(Object.assign({},s.W.ErrorWhileFetchingContentPreviewContent),{message:"Content fetch failed",pb:Object.assign(Object.assign({},s.W.ErrorWhileFetchingContentPreviewContent.pb),{customMessage:`Content fetch failed for: ${n}. Error: ${e&&e.message}. Stack: ${e&&e.stack}`})}))}}))}(p,b,u);g(Object.assign(Object.assign({},s.W.InvalidOrMissingContentId),{message:"Content ID was not available while attempting to load ContentPreview content"}))}))}function d(e){return e?`statusText: ${e.statusText}, status: ${e.status}`:""}function g(e){l.a.sendAppErrorEvent(e)}},sQxI:function(e,t,i){"use strict";var n=i("MlPa");i.o(n,"AutoSuggestContext")&&i.d(t,"AutoSuggestContext",(function(){return n.AutoSuggestContext})),i.o(n,"ButtonDirection")&&i.d(t,"ButtonDirection",(function(){return n.ButtonDirection})),i.o(n,"ProgressType")&&i.d(t,"ProgressType",(function(){return n.ProgressType})),i.o(n,"RadioSlot")&&i.d(t,"RadioSlot",(function(){return n.RadioSlot})),t.default=n.default},"vT/5":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ERkP"),s=i.n(n),o=i("y2Il"),a=i("FWTu");function r(e){const t=e.size?Object(a.a)(e.size):void 0;return s.a.createElement(e.tag||o.b.p,{style:t},e.children)}},vjdx:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("dMmp");class s{constructor(){this.dateFormatOptionsMap=new Map,this.setSupportsLocaleSpecifiers(),this.dateFormatOptionsMap.set(1,{year:"numeric",month:"short",day:"numeric"}),this.dateFormatOptionsMap.set(2,{month:"short",day:"numeric"}),this.dateFormatOptionsMap.set(3,{weekday:"short"}),this.dateFormatOptionsMap.set(4,{hour:"numeric",minute:"numeric"})}localizedDateString(e,t){return this.formatDate(e,0,t)}localizedDateStringMedium(e,t){return this.formatDate(e,1,t)}localizedMonthDate(e,t){return this.formatDate(e,2,t)}localizedWeekday(e,t){return this.formatDate(e,3,t)}formatTimeFromDate(e,t){return this.supportsLocaleSpecifiers&&this.dateFormatOptionsMap?e.toLocaleTimeString(t,this.dateFormatOptionsMap.get(4)):e.toTimeString()}format(e,...t){return e?n.String.Format(e,...t):""}localizedNumberString(e,t){return this.supportsLocaleSpecifiers?e.toLocaleString(t):e.toString()}formatDate(e,t,i){if(this.supportsLocaleSpecifiers){if(0===t)return e.toLocaleDateString(i);if(this.dateFormatOptionsMap){const n=this.dateFormatOptionsMap.get(t);return e.toLocaleDateString(i,n)}}return e.toDateString()}setSupportsLocaleSpecifiers(){this.supportsLocaleSpecifiers=(()=>{try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1})()}}var o=i("Oa3u");class a{constructor(e,t,i){this.timeLocStrings=e,this.locale=t,this.locUtility=i}transform(e,t,i){if(!e)return"";if(!this.locUtility.supportsLocaleSpecifiers)return t;const n=Object(o.c)(e);switch(Object(o.b)(e)){case 0:return"";case 1:return this.timeLocStrings.JustNow;case 2:return this.timespanString(n,n<120?this.timeLocStrings.NumberMinuteAgo:this.timeLocStrings.NumberMinutesAgo,60);case 3:return this.timespanString(n,n<7200?this.timeLocStrings.NumberHourAgo:this.timeLocStrings.NumberHoursAgo,3600);case 4:if(0===i){const t=this.timeLocStrings.TimeYesterday;return this.locUtility.format(t,this.locUtility.formatTimeFromDate(e,this.locale))}return n<86400?this.timespanString(n,n<7200?this.timeLocStrings.NumberHourAgo:this.timeLocStrings.NumberHoursAgo,3600):this.timespanString(n,n<172800?this.timeLocStrings.NumberDayAgo:this.timeLocStrings.NumberDaysAgo,86400);case 5:return 0===i?this.locUtility.format(this.timeLocStrings.TimeDayOfWeek,this.locUtility.localizedWeekday(e,this.locale),this.locUtility.formatTimeFromDate(e,this.locale)):this.timespanString(n,n<172800?this.timeLocStrings.NumberDayAgo:this.timeLocStrings.NumberDaysAgo,86400);case 6:return this.locUtility.localizedMonthDate(e,this.locale);default:return this.locUtility.localizedDateStringMedium(e,this.locale)}}timespanString(e,t,i){const n=Math.floor(e/i);return this.locUtility.format(t,this.locUtility.localizedNumberString(n,this.locale))}}const r={JustNow:"Just Now",NumberDayAgo:"{0} day ago",NumberDaysAgo:"{0} days ago",NumberHoursAgo:"{0} hours ago",NumberMinutesAgo:"{0} minutes ago",NumberHourAgo:"{0} hour ago",NumberMinuteAgo:"{0} minute ago",TimeYesterday:"Yesterday at {0}",TimeDayOfWeek:"{0} at {1}"};function c(e,t,i,n){if(e instanceof Date&&!isNaN(e.valueOf())){const o=new s,c=o.localizedDateString(e,t);i||(i=r),n||(n=0);return new a(i,t,o).transform(e,c,n)}return""}},z09o:function(e,t){}}]);